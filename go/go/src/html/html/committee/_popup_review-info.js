var g_trTemplete;"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>"),"undefined"==typeof ipsap_item_module_js&&document.write("<script src='/assets/js/ipsap/ipsap_item_module.js'><\/script>"),document.write("<script src='/html/researcher/application_new-0.js'><\/script>");var user_info=JSON.parse(COMM.getCookie(CONST.COOKIE.IPSAP_USER_INFO)),inst_info=JSON.parse(COMM.getCookie(CONST.COOKIE.IPSAP_INST_INFO));function originalJSFunction(e){}function sumPoint(e){var t=0,a="fail";e.each((function(e,a){if("undefined"==$(a).text()||"-"==$(a).text())return 0;t+=parseInt($(a).text())})),a=t>=parseInt(inst_info.ia_base_score)?"pass":a,$("#total_sum").html(`<span class="${a}">${t}</span> / 100`)}function sumAccount(e){var t=0,a="fail";e.each((function(e,a){"적합"==$(a).text()&&t++})),a=t>=parseInt(inst_info.ia_base_item)?"pass":a,$("#total_account").html(`<span class="${a}">${t}</span> / 10`)}function dataMappingFunc(e){var t=e.getItemData("general_title",!0);$("#coding_title_area").children("div").eq(0).children("span").text(t.getStringValue("name_ko")),$("#coding_title_area").children("div").eq(1).children("span").text(t.getStringValue("name_en"));t=e.getItemData("general_end_date",!0);"0"==g_AppInfo.appObj.approved_dttm?$("#coding_title_area").children("div").eq(2).children("span").text("위원회 승인일 ~ "+t.getStringValue("0")):$("#coding_title_area").children("div").eq(2).children("span").text(getDttm(g_AppInfo.appObj.approved_dttm).dt+" ~ "+t.getStringValue("0")),(t=e.getItemData("expert_review_total_review")).applyTextValueReadOnly();{t=e.getItemData("expert_review_result");let a=0;try{a=Number(t.dataObj.saved_data.data[0].select_ids[0])}catch(e){}let i="";try{i=t.dataObj.saved_data.data[0].inputs[String(a)][1]}catch(e){}let n="";for(let e=0;e<t.dataObj.items.length;++e)if(t.dataObj.items[e].id==a){n=t.dataObj.items[e].value;break}$("#expert_review_result_text").prev(".custom-radio").find("label").text(n),""!=i?$("#expert_review_result_text").text(i):$("#expert_review_result_text").remove()}{t=e.getItemData("expert_member");var a="";try{a=t.dataObj.saved_data.data[0].info.name}catch(e){}$("#experter").text(spaceAddStr(a));var i=0;try{i=t.dataObj.saved_data.data[0].user_seq}catch(e){}var n=e.getItemData("expert_review_dttm");const r=new Date(1e3*n.dataObj.saved_data.data[String(i)]);$("#expert_submit_date").text(getTimeStrFromDateType(r))}let r,s=!0;{var _=e.getItemData("expert_review_opinion",!0),l=e.getItemData("expert_review_evaluation",!0);let t=$(".list_table").first().find("tbody");r=l.dataObj.codes;for(let e=0;e<r.length;++e){let a=g_trTemplete.clone();a.children("td").eq(0).text(r[e].contents);let i=a.children("td").eq(1),n=i.children("ul").children("li").first().clone();i.children("ul").empty();for(let t=0;t<r[e].sub_items.length;++t){let a=n.clone();a.text(r[e].sub_items[t].contents),i.children("ul").append(a)}try{let t=_.dataObj.saved_data.data[r[e].is_seq];var o=JSON.parse(t);let i=a.children("td").eq(2);i.empty();let n="";for(let t=0;t<o.select.length;++t){let a=o.select[t],i=_.dataObj.codes[e].sub_items;for(let e=0;e<i.length;++e)if(a==i[e].is_seq){""!=n&&(n+="<br>"),n+=i[e].contents;break}}i.removeClass("noComment"),i.append(`<div class="review_numbers">${n}</div>`),i.append(`<div class="review_desc text-wrap">${o.text}</div>`)}catch(e){}let l=a.children("td").eq(3);if(l.hasClass("evaluation_score")){let t=`review_point_${r[e].is_seq}`;l.attr("name",t)}else{let t=`review_pass_${r[e].is_seq}`;l.attr("name",t),s=!1}t.append(a)}}originalJSFunction();for(let e=0;e<r.length;++e)if(s){let t=`review_point_${r[e].is_seq}`;try{let a=l.dataObj.saved_data.data[r[e].is_seq];a<2?a=2:a||(a="-"),$(`td[name=${t}]`).text(`${a}`)}catch(e){}}else{let t=`review_pass_${r[e].is_seq}`;try{l.dataObj.saved_data.data[r[e].is_seq]>0?$(`td[name=${t}]`).text("적합"):$(`td[name=${t}]`).text("부적합")}catch(e){}}sumPoint($("td.evaluation_score")),sumAccount($("td.evaluation_yn"))}$((function(){loadApplicationParams(),function(e){if(IPSAP.DEMO_MODE)originalJSFunction();else{inst_info.ia_evaluation_method==IPSAP.EVALUATION_METHOD.SCORE?($(".evaluation_yn").remove(),$(".evaluation_yn_sum").remove()):inst_info.ia_evaluation_method==IPSAP.EVALUATION_METHOD.YN?($(".evaluation_score").remove(),$(".evaluation_score_sum").remove()):inst_info.ia_evaluation_method==IPSAP.EVALUATION_METHOD.NONE?($(".evaluation_score").remove(),$(".evaluation_score_sum").remove(),$(".evaluation_yn").remove(),$(".evaluation_yn_sum").remove(),e.find("tfoot").find(".text-right").text("")):alert("Error!!!");let t=$(".list_table").first().find("tbody");g_trTemplete=t.children("tr").first().clone(),t.empty();let a={"filter.query_items":"general_title,general_end_date,expert_review_opinion,expert_review,expert_member"};g_AppItemParser=new ItemParser(g_AppInfo.appSeq),g_AppItemParser.load(a,dataMappingFunc)}}($(".page-content"))}));