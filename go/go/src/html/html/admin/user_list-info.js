"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>");var user_seq=IPSAP.getStor("user_seq"),g_data;function getInfoMember(){IPSAP.DEMO_MODE?$(".card").removeClass("hidden"):API.load({url:eval("`"+CONST.API.PLATFORM.REGI_USER_INFO+"`"),type:CONST.API_TYPE.GET,success:function(e){g_data=e,$(".org_list").empty();var t=$(".tab-content").find(".tab-pane").eq(0).clone();$(".tab-content").empty();for(var n=0;n<e.length;n++){$(".org_list").append(`<li class="nav-item"><a class="nav-link" data-toggle="tab" data-usernum="${e[n].user_seq}" href="#org-0${n+1}">${e[n].institution_name_ko}</a></li>`),$("#org_tab_name").text($('[data-toggle="tab"]').first().text());var a=t.clone();a.attr("id",`org-0${n+1}`),a.find(".org_name_kr").text(e[n].institution_name_ko),a.find(".org_name_en").text(e[n].institution_name_en),a.find(".org_code").text(e[n].institution_code);let i="",s=[];s.push(e[n].user_type_str.split(",")),$.each(s[0],(function(e,t){i+='<span class="label auth_label">',i+=t+"</span>"})),a.find(".auth").html(i),a.find(".dept").text(e[n].dept_str),a.find(".position").text(e[n].position_str),a.find(".major").text(e[n].major_field_str),a.find(".status").text(e[n].user_status_str);let r="";switch(e[n].user_status){case"1":case"3":r="unregistered",$(".card-footer").children().eq(3).css("display","none");break;case"2":r="registered",$(".card-footer").children().eq(1).css("display","none"),$(".card-footer").children().eq(2).css("display","none");break;case"4":r="withdrawn",$(".card-footer").children().eq(1).css("display","none"),$(".card-footer").children().eq(2).css("display","none"),$(".btn_withdrawn_block").prop("disabled",!0);break;case"5":r="expelled",$(".card-footer").children().eq(1).css("display","none"),$(".card-footer").children().eq(2).css("display","none"),$(".btn_withdrawn_block").prop("disabled",!0)}a.find(".status").addClass(r),a.find(".man_name").text(e[n].name),a.find(".man_phone").text(e[n].phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3")),a.find(".man_email").text(e[n].email),a.find("button").attr("onclick",`initPw(${e[n].user_seq});`),"1"==e[n].agree_email?(a.find(".agree_to_receive-email").attr("checked",!0),a.find(".agree_to_receive-email").attr("readonly",!0)):a.find(".agree_to_receive-email").attr("disabled",!0),"1"==e[n].agree_sms?(a.find(".agree_to_receive-sms").attr("checked",!0),a.find(".agree_to_receive-sms").attr("readonly",!0)):a.find(".agree_to_receive-sms").attr("disabled",!0),"1"==e[n].agree_pri_open?(a.find(".agree_to_open-info").attr("checked",!0),a.find(".agree_to_open-info").attr("readonly",!0)):a.find(".agree_to_open-info").attr("disabled",!0),$(".edu_date").text(e[n].edu_date.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3")),$(".edu_inst").text(e[n].edu_institution_str),$(".edu_num").text(e[n].edu_course_num),$(".tab-content").append(a)}$("#org-01").addClass("active"),$(".card").removeClass("hidden")},complete:function(){$('[data-toggle="tab"]').eq(0).addClass("active"),$('[data-toggle="tab"]').on("click",(function(e){var t=$(this).attr("href");$(".tab-pane").removeClass("active"),$(`${t}`).addClass("active"),$("#org_tab_name").text($(this).text()),IPSAP.setStor("user_seq",$(this).data("usernum"))}))}})}function initPw(e){if(IPSAP.DEMO_MODE)return;$("#modal_init_pw").modal("show");let t=CONST.API.ADMIN.PATCH_PASS;$("#btn_init_pw").on("click",(function(){API.load({url:t.replace("${user_seq}",e),type:CONST.API_TYPE.PATCH,success:function(e){$("#modal_init_pw").modal("hide")},error:function(e){}})}))}function staffExpell(){if(IPSAP.DEMO_MODE)return;let e=CONST.API.ADMIN.EXPELL;API.load({url:e.replace("${user_seq}",user_seq),type:CONST.API_TYPE.PATCH,success:function(e){$("#modal_expell").modal("hide")},error:function(e){},complete:function(){window.location.href="./user_list.html"}})}function resendMail(){let e=CONST.API.PLATFORM.REGI_USER_RESEND_MSG;API.load({url:e.replace("${user_seq}",user_seq),type:CONST.API_TYPE.PATCH,success:function(e){$("#modal_resend").modal("hide")},error:function(e){},complete:function(){window.location.href="./user_list.html"}})}function deleteTempUser(){let e=CONST.API.PLATFORM.REGI_USER_DELETE;API.load({url:e.replace("${user_seq}",user_seq),type:CONST.API_TYPE.DELETE,success:function(e){$("#modal_remove_temp").modal("hide")},error:function(e){},complete:function(){window.location.href="./user_list.html"}})}$((function(){$(".page-content");getInfoMember(),$("#btn_init_pw").on("click",(function(){initPw()})),$("#btn_expell").on("click",(function(){staffExpell()})),$("#btn_resend").on("click",(function(){resendMail()})),$("#btn_delete").on("click",(function(){deleteTempUser()}))}));