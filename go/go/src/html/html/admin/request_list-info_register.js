"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>"),"undefined"==typeof date_utils_js&&document.write("<script src='/assets/js/common/util/date_utils.js'><\/script>"),"undefined"==typeof ipsap_item_module_js&&document.write("<script src='/assets/js/ipsap/ipsap_item_module.js'><\/script>");var reqsvc_seq=IPSAP.getStor("reqsvc_seq");function serviceApprove(){let approved_comment=$("#memo_text").val(),param={approved_comment:approved_comment};API.load({url:eval("`"+CONST.API.REQUEST.HANDLE+"`")+"?filter.handle_type=1",type:CONST.API_TYPE.PATCH,data:param,success:function(e){},error:function(e){},complete:function(){window.location.replace("./request_list.html")}})}function serviceHold(){let approved_comment=$(".req_memo").text(),param={approved_comment:approved_comment};API.load({url:eval("`"+CONST.API.REQUEST.HANDLE+"`")+"?filter.handle_type=2",type:CONST.API_TYPE.PATCH,data:param,success:function(e){},error:function(e){},complete:function(){window.location.replace("./request_list.html")}})}function serviceResend(){API.load({url:eval("`"+CONST.API.REQUEST.HANDLE+"`"),type:CONST.API_TYPE.PATCH,data:{"filter.handle_type":"3"},success:function(e){},error:function(e){},complete:function(){window.location.replace("./request_list.html")}})}$((function(){if(IPSAP.DEMO_MODE)return void $("#bodyForm").removeClass("hidden");$(".page-content");let e=CONST.API.REQUEST.DETAIL;API.load({url:e.replace("${reqsvc_seq}",reqsvc_seq),type:CONST.API_TYPE.GET,success:function(e){var o="";if(e.tmp_approved_dttm=getDttm(e.approved_dttm),e.tmp_phoneno=e.phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3"),e.tmp_telno=e.telno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3"),"0"==e.request_status?o="미처리":"1"==e.request_status?o="처리중":"2"==e.request_status?(o=`보류: ${e.tmp_approved_dttm.dt}`,$(".hold").addClass("hidden")):o=`완료: ${e.tmp_approved_dttm.dt}`,$(".apptype_date").text(o),$(".req_memo").text(e.approved_comment),$("#modal_approve").find("textarea").val(e.approved_comment),$("#modal_hold").find("textarea").val(e.approved_comment),e.institution_type.length>0){let o=$(`input:radio[name="org_type"]:input[value="${e.institution_type}"]`);o.prop("checked","checked"),o.prop("readonly","readonly"),$(`input:radio[name="org_type"]:input[value!="${e.institution_type}"]`).prop("disabled","disabled")}$(".formrow1").find("span.data").text(`${e.name_ko}`),$(".formrow2").find("span.data").text(`${e.name_en}`),$(".formrow3").find("span.data").text(`${e.institution_code}`),$(".formrow4").find("span.data").text(`(${e.zipcode}) ${e.addr1} ${e.addr2}`),$(".formrow5").find("span.data").html(`<a href="${e.homepage_url}" target="_blank">${e.homepage_url}</a>`),e.logo_file_src?($(".formrow6").children().find(".data").eq(0).html(`<a href="${e.logo_file_src}" target="_blank"><img src="${e.logo_file_src}" id="org_logo_file"></a>`),$("#org_logo_file").on({load:e=>{if($("#org_logo_file_size").length){let e=$("#org_logo_file").width(),o=$("#org_logo_file").height();$("#org_logo_file_size").text(`${e}px X ${o}px`)}else $("#org_logo_file_size").text("File 없음")}})):($(".formrow6").children().find(".data").eq(0).html(""),$(".formrow6").children().find("#org_logo_file_size").parent().html("")),$(".formrow7").find("span.data").eq(0).text(`${e.user_name}`),$(".formrow7").find("span.data").eq(1).text(`${e.user_name_en}`),$(".formrow8").find("span.data").text(`${e.email}`),$(".formrow9").find("span.data").eq(0).text(`${e.dept_str}`),$(".formrow9").find("span.data").eq(1).text(`${e.position_str}`),$(".formrow10").find("span.data").eq(0).text(`${e.tmp_telno}`),$(".formrow10").find("span.data").eq(1).text(`${e.tmp_phoneno}`),"1"==e.agree_email?($("#agree_email").prop("checked",!0),$("#agree_email").prop("readonly",!0)):($("#agree_email").prop("checked",!1),$("#agree_email").prop("disabled",!0)),"1"==e.agree_sms?($("#agree_sms").prop("checked",!0),$("#agree_sms").prop("readonly",!0)):($("#agree_sms").prop("checked",!1),$("#agree_sms").prop("disabled",!0)),"1"==e.agree_pri_open?($("#agree_info").prop("checked",!0),$("#agree_info").prop("readonly",!0)):($("#agree_info").prop("checked",!1),$("#agree_info").prop("disabled",!0));var r=e.judge_type.split(",");$('input:checkbox[name="evaluation_type"]').each((function(){-1!=$.inArray(this.value,r)?(this.checked=!0,this.readOnly=!0):(this.checked=!1,this.disabled=!0)})),"1"==e.ia_evaluation_method?($('input:radio[name="org_rule_1"][value="1"]').prop("checked",!0),$('input:radio[name="org_rule_1"][value="1"]').prop("readonly",!0),$('input:radio[name="org_rule_1"][value="2"]').prop("checked",!1),$('input:radio[name="org_rule_1"][value="2"]').prop("disabled",!0),$("#IACUC_agree_point").val(`${e.ia_base_score}`),$("#IACUC_agree_point").prop("readonly",!0),$("#IACUC_agree_count").prop("disabled",!0)):($('input:radio[name="org_rule_1"][value="2"]').prop("checked",!0),$('input:radio[name="org_rule_1"][value="2"]').prop("readonly",!0),$('input:radio[name="org_rule_1"][value="1"]').prop("checked",!1),$('input:radio[name="org_rule_1"][value="1"]').prop("disabled",!0),$("#IACUC_agree_count").val(`${e.ia_base_item}`),$("#IACUC_agree_count").prop("readonly",!0),$("#IACUC_agree_point").prop("disabled",!0)),"1"==e.ia_final_director?($('input:radio[name="org_rule_2"][value="1"]').prop("checked",!0),$('input:radio[name="org_rule_2"][value="1"]').prop("readonly",!0),$('input:radio[name="org_rule_2"][value="2"]').prop("disabled",!0)):($('input:radio[name="org_rule_2"][value="2"]').prop("checked",!0),$('input:radio[name="org_rule_2"][value="2"]').prop("readonly",!0),$('input:radio[name="org_rule_2"][value="1"]').prop("disabled",!0)),$(".formrow14").find("span.data").eq(0).text(`${e.business_num}`),$(".formrow14").find("span.data").eq(1).html(`<a href="${e.business_file_src}" target="_blank">${e.business_file_org_name}</a>`);var a=e.payment_method.split(",");$('input:checkbox[name="payment_type"]').each((function(){-1!=$.inArray(this.value,a)?(this.checked=!0,this.readOnly=!0):(this.checked=!1,this.disabled=!0)})),"1"==e.invoice_flag?($('input:radio[name="org_invoice"][value="1"]').prop("checked",!0),$('input:radio[name="org_invoice"][value="1"]').prop("readonly",!0),$('input:radio[name="org_invoice"][value="2"]').prop("disabled",!0)):($('input:radio[name="org_invoice"][value="2"]').prop("checked",!0),$('input:radio[name="org_invoice"][value="2"]').prop("readonly",!0),$('input:radio[name="org_invoice"][value="1"]').prop("disabled",!0))},error:function(e){},complete:function(e){"9"==e.responseJSON.request_status?($(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none"),$(".card-footer").children().eq(2).css("display","none")):$(".card-footer").children().eq(3).css("display","none"),$("#bodyForm").removeClass("hidden")}}),$("#btn_approved").on("click",(function(){serviceApprove()})),$("#btn_hold").on("click",(function(){serviceHold()})),$("#btn_resend").on("click",(function(){serviceResend()}))}));