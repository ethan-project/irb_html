function registerPlan(){var e=new Object;e.desc_text=$("#plan_desc").val(),e.membership_category="membership",e.membership_discount_amount=Number($("#org_subsFee").val().replace(/,/g,""))-Number($("#real_subsFee").val().replace(/,/g,"")),e.membership_discount_rate=parseInt($("#rate_subsFee").val())/100,e.membership_discount_type="R",e.membership_discounted_amount=Number($("#real_subsFee").val().replace(/,/g,"")),e.membership_price=Number($("#org_subsFee").val().replace(/,/g,"")),e.membership_pid=e.membership_category+e.membership_price+"_"+moment().unix(new Date),e.name=$("#plan_name").val(),$("#availability").is(":checked")?e.plan_available=1:e.plan_available=0,e.plan_category="plan",e.plan_discount_amount=Number($("#org_monthlyFee").val().replace(/,/g,""))-Number($("#real_MonthlyFee").val().replace(/,/g,"")),e.plan_discount_rate=parseInt($("#rate_MonthlyFee").val())/100,e.plan_discount_type="R",e.plan_discounted_amount=Number($("#real_MonthlyFee").val().replace(/,/g,"")),e.plan_price=Number($("#org_monthlyFee").val().replace(/,/g,"")),e.plan_pid=e.plan_category+e.plan_price+"_"+moment().unix(new Date),e.usage_limit=Number($("#limit").val()),API.load({url:CONST.API.MEMBERSHIP.PLAN.NEW,type:CONST.API_TYPE.POST,data:e,success:function(e){},complete:function(){location.replace("./plan_list.html")}})}"undefined"==typeof ipsap_common_js&&document.write("<script src='/assets/js/ipsap/ipsap_common.js'><\/script>"),"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>"),"undefined"==typeof date_utils_js&&document.write("<script src='/assets/js/common/util/date_utils.js'><\/script>"),$(document).ready((function(){$(".card").removeClass("hidden"),initDataTable("#datatable"),IPSAP.DEMO_MODE||($("input:text").on("input",(function(){$("#plan_name").val()?$("#btn_confirm").prop("disabled",!1):$("#btn_confirm").prop("disabled",!0)})),$("#btn_confirm").on("click",(function(){$("#modal_confirm").modal("show")})),$("#btn_register_plan").on("click",(function(){registerPlan()})))})),$(window).on({load:e=>{$("#org_subsFee, #org_monthlyFee, #rate_subsFee, #rate_MonthlyFee, #real_subsFee, #real_MonthlyFee").each(((e,a)=>{a.value=setComma(a.value)}))}}),$("#org_subsFee, #org_monthlyFee, #rate_subsFee, #rate_MonthlyFee, #real_subsFee, #real_MonthlyFee").on({input:e=>{var a=e.currentTarget,t=$("#org_subsFee"),l=$("#org_monthlyFee"),r=$("#rate_subsFee"),s=$("#rate_MonthlyFee"),n=$("#real_subsFee"),o=$("#real_MonthlyFee"),i=t.val().replace(/,/g,""),m=l.val().replace(/,/g,""),c=r.val().replace(/,/g,""),_=s.val().replace(/,/g,""),p=n.val().replace(/,/g,""),u=o.val().replace(/,/g,"");a.value=a.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1"),a.value=setComma(a.value),"rate_subsFee"==$(a).attr("id")?(c=a.value.replace(/,/g,""),n.val(setComma(i-i*c*.01))):"real_subsFee"==$(a).attr("id")?(p=a.value.replace(/,/g,""),r.val(setComma((100-p/i*100).toFixed(2)))):"org_subsFee"==$(a).attr("id")&&(i=a.value.replace(/,/g,""),n.val(setComma(i-i*c*.01))),"rate_MonthlyFee"==$(a).attr("id")?(_=a.value.replace(/,/g,""),o.val(setComma(m-m*_*.01))):"real_MonthlyFee"==$(a).attr("id")?(u=a.value.replace(/,/g,""),s.val(setComma((100-u/m*100).toFixed(2)))):"org_monthlyFee"==$(a).attr("id")&&(i=a.value.replace(/,/g,""),o.val(setComma(m-m*_*.01)))}}),$("#reseter").on({click:e=>{$("form[name=plan_form]")[0].reset(),$("#org_subsFee, #org_monthlyFee, #rate_subsFee, #rate_MonthlyFee, #real_subsFee, #real_MonthlyFee").each(((e,a)=>{a.value=setComma(a.value)}))}});