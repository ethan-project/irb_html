var changeInfoTemplate;function loadApplicationExperimentInfoBring(){if(IPSAP.DEMO_MODE)e();else{g_AppInfo.loadParams();let t={"filter.query_items":"animal_type_bring,final_judge_result,application_info,additional_reporting","filter.parent_items":"general_title,general_end_date,application_info,animal_type,animal_type_final,animal_type_bring,animal_sum"};g_AppItemParser=new ItemParser(g_AppInfo.childAppSeq),g_AppItemParser.load(t,(function(t){var a=t.getParentItemData("general_title");$("#name_ko").text(a.getStringValue("name_ko")),$("#name_en").text(a.getStringValue("name_en"));{a=t.getParentItemData("application_info");let h=Number(a.getStringValue("approved_dttm"));$("#approved_dttm").text(getDttm(h).dt)}{let P=(a=t.getItemData("application_info")).getStringValue("application_no");$(".register_num").text(P)}a=t.getParentItemData("general_end_date");$("#general_end_date").text(a.getStringValue("0"));var n="additional_reporting";a=t.getItemData(n);$(`#${n}`).text(a.applyTextValueReadOnly());{var r=t.getParentItemData("animal_type"),d=t.getParentItemData("animal_type_final"),p=t.getParentItemData("animal_type_bring"),l=t.getParentItemData("animal_sum").dataObj.saved_data.data;0==(_=d.dataObj.saved_data.data).length&&(_=r.dataObj.saved_data.data);let g=p.dataObj.saved_data.data;if(g.length>0){function i(e){for(let t=0;t<_.length;++t)if(_[t].animal_code_str==e)return!0;return!1}for(let A=0;A<g.length;++A)i(g[A].animal_code_str)||_.push(g[A])}function s(e){var t=0,a=0;for(let n=0;n<g.length;++n)g[n].animal_code_str==e&&(t+=parseInt(g[n].male_cnt),a+=parseInt(g[n].female_cnt));return{m:t,f:a}}var c=$(".list_table").eq(0).children("tbody"),o=c.children("tr").first().clone();c.empty();for(let q=0;q<l.length;++q){let y=s(l[q].animal_code_str);(m=o.clone()).children("td").eq(0).text(l[q].animal_code_str),m.children("td").eq(1).text(l[q].male_cnt),m.children("td").eq(2).text(l[q].female_cnt),m.children("td").eq(3).text(parseInt(l[q].male_cnt)+parseInt(l[q].female_cnt)),m.children("td").eq(4).text(y.m),m.children("td").eq(5).text(y.f),m.children("td").eq(6).text(y.m+y.f),m.children("td").eq(7).text(l[q].male_cnt-y.m),m.children("td").eq(8).text(l[q].female_cnt-y.f),m.children("td").eq(9).text(parseInt(l[q].male_cnt)+parseInt(l[q].female_cnt)-y.m-y.f),c.append(m)}}var _=(p=t.getItemData("animal_type_bring")).dataObj.saved_data.data,f=$("#bring_table").children("tbody"),I=f.children("tr").first().clone();f.empty();for(let x=0;x<_.length;++x){var m;(m=I.clone()).children("td").eq(0).text(_[x].animal_code_str),m.children("td").eq(1).children("span").text(_[x].male_cnt),m.children("td").eq(2).children("span").text(_[x].female_cnt),m.children("td").eq(3).children("span").text(parseInt(_[x].male_cnt)+parseInt(_[x].female_cnt)),m.children("td").eq(4).children("span").text(_[x].supplier_type_str),m.children("td").eq(5).children("span").text(_[x].supplier_name),m.children("td").eq(6).children("span").text(_[x].genetic_type),f.append(m)}switch($(".agree_date").eq(0).text(getDate(g_AppInfo.appObj.submit_dttm)),$(".reviewer").eq(0).text(spaceAddStr(g_AppInfo.appObj.user_name)),$(".task_title_ko").text(g_AppInfo.appObj.name_ko),$(".task_director_all").text(`(연구 책임자 : ${g_AppInfo.appObj.user_name})`),parseInt(g_AppInfo.appObj.application_result)){case IPSAP.APPLICATION_RESULT.SUPPLEMENT:$(".apptype_date").text("보완중"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.CHECKING:case IPSAP.APPLICATION_RESULT.CHECKING_2:$(".apptype_date").text("검토중"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.JUDGE_ING:case IPSAP.APPLICATION_RESULT.JUDGE_ING_2:$(".apptype_date").text("심사중"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.DECISION_ING:$(".apptype_date").text("심의중"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.REJECT:$(".apptype_area").addClass("denied"),$(".apptype_date").text("반려"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.REQUIRE_RETRY:$(".apptype_area").addClass("denied"),$(".apptype_date").text("보완후 재심"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","block");break;case IPSAP.APPLICATION_RESULT.EXPERIMENT_ING_A:$(".apptype_date").text("실험중 (승인)"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","block");break;case IPSAP.APPLICATION_RESULT.EXPERIMENT_ING_AC:$(".apptype_date").text("실험중 (조건부 승인)"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","block");break;case IPSAP.APPLICATION_RESULT.EXPERIMENT_FINISH:$(".apptype_date").text("실험 만료"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","block");break;case IPSAP.APPLICATION_RESULT.TASK_FINISH:$(".apptype_date").text("실험 종료"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","block");break;case IPSAP.APPLICATION_RESULT.ACCEPT:$(".apptype_date").text("승인 : "+getDttm(g_AppInfo.appObj.approved_dttm).dt),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","block");break;case IPSAP.APPLICATION_RESULT.ACCEPT_AC:$(".apptype_date").text("조건부 승인 : "+getDttm(g_AppInfo.appObj.approved_dttm).dt),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","block");break;default:$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none")}switch(parseInt(g_AppInfo.appObj.application_step)){case 0:default:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(0).addClass("active");break;case 1:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(1).addClass("active");break;case 4:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(2).addClass("active")}e(),setAppChangeInfo()}))}function e(){$(".card").removeClass("hidden")}}function setAppChangeInfo(){urlPath=CONST.API.APPLICATION_CHANGE.ANIMALINFO,app_seq=g_AppItemParser.app_seq,API.load({url:urlPath.replace("${app_seq}",app_seq),type:CONST.API_TYPE.GET,success:function(e){if(!e)return;e.length>0&&$(".trace_label").removeClass("hidden");var t=$("#trace_changing").find(".changing-list").clone().clone();$("#trace_changing").empty();var a=1;let n=e;for(const[e,l]of Object.entries(n)){t.find(".list-num").text(a),a++,t.find(".list-date").text(l.approved_dttm);var r,d=JSON.parse(l.contents);r=t.find(".data").eq(1).children("div").first().clone(),t.find(".data").eq(1).empty(),t.find(".data").eq(2).text(d[2]),l.filepath?(t.find(".data").eq(3).text(l.org_file_name),t.find(".data").eq(3).attr("href",l.src)):t.find(".data").eq(3).text("");var p=JSON.parse(d[1]);for(let e=0;e<p.length;++e){let a=r.clone();a.find("span").eq(0).text(p[e][0]),a.find("span").eq(3).text(p[e][1]),a.find("span").eq(5).text(p[e][2]),a.find("span").eq(6).text(p[e][3]),a.find("span").eq(9).text(p[e][4]),a.find("span").eq(11).text(p[e][5]),t.find(".data").eq(1).append(a)}$("#trace_changing").append(t)}},error:function(){},complete:function(){}})}"undefined"==typeof ipsap_common_func_js&&document.write("<script src='/assets/js/ipsap/ipsap_common_func.js'><\/script>");