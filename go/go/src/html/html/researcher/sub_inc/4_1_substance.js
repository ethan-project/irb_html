function substanceDataMapping(e,a,s,n){var t,_="substance_dosage_name",l=e.getItemData(_).getDataCount();function c(a){var s=a.parent(),n=a.attr("id");a.remove(),--i;var t,_=n.split("_");if(_.length>1){let a=Number(_[_.length-1]);t=a,e.removeMultiUIIndex("substance_dosage_flag",t),e.removeMultiUIIndex("substance_dosage_name",t),e.removeMultiUIIndex("substance_danger_flag",t),e.removeMultiUIIndex("substance_danger_pathogen",t),e.removeMultiUIIndex("substance_dangerous",t),e.removeMultiUIIndex("substance_ibc_number",t),e.removeMultiUIIndex("substance_possible_flag",t)}var l=1;s.children("div").each((function(){var e=`[투여 물질 ${l}]`;$(this).attr("id");$(this).find(".blue_deep").each((function(){$(this).text(e)})),++l})),0==i&&b(!0,!0)}function u(a){e.addMultiUIIndex("substance_dosage_flag",a),e.addMultiUIIndex("substance_dosage_name",a),e.addMultiUIIndex("substance_danger_flag",a),e.addMultiUIIndex("substance_danger_pathogen",a),e.addMultiUIIndex("substance_dangerous",a),e.addMultiUIIndex("substance_ibc_number",a),e.addMultiUIIndex("substance_possible_flag",a)}_="main_substance",$("#"+_).load("/html/researcher/sub_inc/4_1_substance.html",(function(s){if(t=s,0==l)$("#"+_).empty(),b(!0);else{u(1);for(let e=1;e<l;++e)b(!1);r(0,l)}$("#"+_).removeClass("hidden"),$(document).on("click",".btn-substance-delete",(function(){var s=$(this).parent().parent().parent();if(c(s),a){var n=s.attr("id").split("_");$("#animal_exp_substance_list_"+n[2]).remove();var t=1;$("#animal_exp_substance_list").children("tr").each((function(){var e=`[투여 물질 ${t}]`;$(this).attr("id");$(this).find(".blue_deep").each((function(){$(this).text(e)})),++t})),e.removeMultiUIIndex("animal_exp_substance_dosage",n[2]),e.removeMultiUIIndex("animal_exp_substance_cnt",n[2])}})),$(document).on("click",".btn-substance-insert",(function(){b(!0,!0)})),a&&$(document).on("keyup",".substance_dosage_name",(function(){var e=$(this).attr("id").split("_"),a=$(this).val();$(`#substance_dosage_name2_${e[3]}`).text(a)}))}));var i=1,d=1;function b(s,n){let c;0==l&&(i=0,++l),++d,++i,c=t.replaceAll("main_substance_1",`main_substance_${d}`),c=c.replaceAll("substance_dosage_flag_group_1",`substance_dosage_flag_group_${d}`),c=c.replaceAll("substance_dosage_flag_1",`substance_dosage_flag_${d}`),c=c.replaceAll("substance_dosage_name_1",`substance_dosage_name_${d}`),c=c.replaceAll("substance_danger_flag_group_1",`substance_danger_flag_group_${d}`),c=c.replaceAll("substance_danger_flag_1",`substance_danger_flag_${d}`),c=c.replaceAll("substance_danger_pathogen_1",`substance_danger_pathogen_${d}`),c=c.replaceAll("substance_dangerous_1",`substance_dangerous_${d}`),c=c.replaceAll("substance_ibc_number_1",`substance_ibc_number_${d}`),c=c.replaceAll("substance_possible_flag_group_1",`substance_possible_flag_group_${d}`),c=c.replaceAll("substance_possible_flag_mc_1",`substance_possible_flag_mc_${d}`),c=c.replaceAll("substance_possible_flag_1",`substance_possible_flag_${d}`),c=c.replaceAll("[투여 물질 1]",`[투여 물질 ${i}]`),$("#"+_).append(c),u(d),s&&r(d-1),a&&n&&function(){var a=$("#main_substance > div:last").attr("id"),s=1*a.split("_")[2];let n;var t=$(""+("#"+a)).find(".blue_deep").eq(0).text();$("#animal_exp_substance_list_non").load("/html/researcher/sub_inc/5_8_substance.html",(function(a){n=a.replaceAll("animal_exp_substance_list_1",`animal_exp_substance_list_${s}`),n=n.replaceAll("substance_dosage_name2_1",`substance_dosage_name2_${s}`),n=n.replaceAll("animal_exp_substance_dosage_1",`animal_exp_substance_dosage_${s}`),n=n.replaceAll("animal_exp_substance_cnt_1",`animal_exp_substance_cnt_${s}`),n=n.replaceAll("[투여 물질 1]",t),$("#animal_exp_substance_list").append(n),e.addMultiUIIndex("animal_exp_substance_dosage",d),e.addMultiUIIndex("animal_exp_substance_cnt",d)}))}()}function r(a,t){var _=!0;null==t&&(t=a+1,_=!1);for(let r=a;r<t;++r){var l="substance_dosage_name";(u=e.getItemData(l)).applyTextValue(r);l="substance_danger_flag";(u=e.getItemData(l)).applyMainCheckValueInCheckBox(l+`_${r+1}`,r)&&$(`#substance_danger_flag_group_${r+1}`).addClass("show");l="substance_danger_pathogen";var u=e.getItemData(l);s?u.makeHtmlCheckListReadOnly(IPSAP.COL.ALL,r):u.makeHtmlCheckList(IPSAP.COL.ALL,r);l="substance_dangerous",u=e.getItemData(l);s?u.makeHtmlCheckListReadOnly(IPSAP.COL.ALL,r):u.makeHtmlCheckList(IPSAP.COL.ALL,r);l="substance_ibc_number";(u=e.getItemData(l)).applyTextValue(r);l="substance_possible_flag";(u=e.getItemData(l)).applyMainCheckValueInCheckBox(l+`_mc_${r+1}`,r)&&$(`#substance_possible_flag_group_${r+1}`).addClass("show"),s?u.makeHtmlCheckListReadOnly(IPSAP.COL.ALL,r):u.makeHtmlCheckList(IPSAP.COL.ALL,r);l="substance_dosage_flag";if(!(u=e.getItemData(l)).applyMainCheckValueInCheckBox(l+`_${r+1}`,r))if(_){var i=$("#"+`main_substance_${r+1}`);0==i.length&&alert("error"),c(i)}else $(`#substance_dosage_flag_group_${r+1}`).removeClass(),$(`#substance_dosage_flag_group_${r+1}`).addClass("collapse");if(s){var d=r+1;$(`#substance_dosage_flag_${d}`).attr("disabled",!0),$(`#substance_dosage_name_${d}`).attr("readonly",!0),$(`#substance_danger_flag_${d}`).attr("disabled",!0),$(`#substance_possible_flag_${d}`).attr("disabled",!0),$(`#substance_possible_flag_mc_${d}`).attr("disabled",!0),$(`#main_substance_${d} > .remove_buttons`).remove(),$(`#substance_ibc_number_${d}`).attr("readonly",!0)}}{function b(a){if(null!=e.guideObj[a]&&(containerObj=$("#main_substance"),0!=containerObj.length)){var s=a+"_guide";containerObj.find(`.${s}`).each((function(){let n=`<ul class="${s}">`+e.guideObj[a]+"</ul>";$("."+s).replaceWith(n)}))}}b("substance_dosage_name"),b("substance_danger_flag"),b("substance_possible_flag")}collapseFun(),void 0!==n&&""!=n&&($("#btn-add").remove(),containerObj.find("*").off().end().on({click:e=>{$(n).modal("show")}}))}}