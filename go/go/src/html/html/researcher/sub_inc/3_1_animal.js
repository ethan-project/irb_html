function animalDataMapping(e,t){var l,a="animal_type",n=e.getItemData(a),_=n.dataObj.saved_data.data,i=_.length;function c(t){e.addMultiUIIndex(a,t)}$("#animal_type").load("/html/researcher/sub_inc/3_1_animal.html",(function(t){if(l=t,0==i)$("#animal_type").empty(),r(!0);else{c(1);for(let e=1;e<i;++e)r(!1);m(0,i)}$(document).on("click",".btn-table-del",(function(){var t,l=$(this).parent().parent(),n=l.attr("id").split("_");if(n.length>0){let _=Number(n[n.length-1]);l.parent().children().length>1&&(t=_,e.removeMultiUIIndex(a,t),l.remove(),--o),0==o&&r(!0)}})),$(document).on("click",".btn-table-add",(function(){r(!0)})),$(document).on("click",".ibc_num_button",(function(e){!function(e){var t=e.currentTarget.id;$("#modal_allApp_list").find(".list-group").empty(),API.load({url:CONST.API.APPLICATION.LIST,type:CONST.API_TYPE.GET,data:{"filter.app_view_type":13},success:function(e){e.list.length?$("#modal_allApp_list").find(".comment_alt").html('신청서를 선택하면, 신청서 정보가 자동으로 입력됩니다.<br><span class="comment">※ 자동 입력은 입력편의를 위한 기능이며, 참조 신청서 원본에는 영향이 없습니다.</span>'):$("#modal_allApp_list").find(".comment_alt").text("선택 가능한 신청서가 없습니다."),$.each(e.list,(function(e,l){$(".list-group").append(`<a href="javasript:void(0);" class="list-group-item hidden" onclick="insertIBCNum('${l.application_no}', '${t}');"><i class="far fa-file-alt text-secondary mr-2"></i>${l.name_ko}</a>`)}))},complete:function(){initVisbleApp()}}),$("#modal_allApp_list").modal("show")}(e)}))}));var o=1,p=1;function r(e){let t;++p,++o,t=l.replaceAll("animal_1",`animal_${p}`),t=t.replaceAll("animal_select_1",`animal_select_${p}`),t=t.replaceAll("mb_grade_select_1",`mb_grade_select_${p}`),t=t.replaceAll("breeding_place_select_1",`breeding_place_select_${p}`),t=t.replaceAll("supplier_type_select_1",`supplier_type_select_${p}`),t=t.replaceAll("lmo_type_select_1",`lmo_type_select_${p}`),t=t.replaceAll("age_unit_1",`age_unit_${p}`),t=t.replaceAll("weight_unit_1",`weight_unit_${p}`),t=t.replaceAll("size_unit_1",`size_unit_${p}`),t=t.replaceAll("lmo_flag_1",`lmo_flag_${p}`),t=t.replaceAll("male_cnt_1",`male_cnt_${p}`),t=t.replaceAll("female_cnt_1",`female_cnt_${p}`),t=t.replaceAll("cnt_sum_1",`cnt_sum_${p}`),t=t.replaceAll("strain_1",`strain_${p}`),t=t.replaceAll("week_age_1",`week_age_${p}`),t=t.replaceAll("weight_gram_1",`weight_gram_${p}`),t=t.replaceAll("supplier_name_1",`supplier_name_${p}`),t=t.replaceAll("ibc_num_1",`ibc_num_${p}`),t=t.replaceAll("genetic_type_1",`genetic_type_${p}`),t=t.replaceAll("size_1",`size_${p}`),t=t.replaceAll("ibc_num_button_1",`ibc_num_button_${p}`),$("#animal_type").append(t),c(p),e&&m(p-1,p)}function m(e,l){function a(e,t){return`${e}_${t+1}`}for(let d=e;d<l;++d){var i=a("animal_select",d);if(combo_html=makeComboList(i,"<option selected disabled>종류 선택</option>",n.dataObj.codes,"animal_code","직접입력"),$("#"+i).replaceWith(combo_html),d<_.length){if(0==(c=_[d].animal_code))c="new",(o=$("#"+i).parent().children("input")).val(_[d].animal_code_str),o.show(),t&&o.attr("readonly",!0);$("#"+i).find(`option[value='${c}'`).attr("selected",!0),t&&$("#"+i).attr("disabled",!0)}i=a("mb_grade_select",d);if(combo_html=makeComboList(i,"<option selected disabled>등급 선택</option>",n.dataObj.codes,"mb_grade","직접입력"),$("#"+i).replaceWith(combo_html),d<_.length){if(0==(c=_[d].mb_grade))c="new",(o=$("#"+i).parent().children("input")).val(_[d].mb_grade_str),o.show(),t&&o.attr("readonly",!0);$("#"+i).find(`option[value='${c}'`).attr("selected",!0),t&&$("#"+i).attr("disabled",!0)}i=a("breeding_place_select",d);if(combo_html=makeComboList(i,"<option selected disabled>장소 선택</option>",n.dataObj.codes,"breeding_place","외부기관(직접입력)"),$("#"+i).replaceWith(combo_html),d<_.length){var c,o;if(0==(c=_[d].breeding_place))c="new",(o=$("#"+i).parent().children("input")).val(_[d].breeding_place_str),o.show(),t&&o.attr("readonly",!0);$("#"+i).find(`option[value='${c}'`).attr("selected",!0),t&&$("#"+i).attr("disabled",!0)}i=a("supplier_type_select",d);combo_html=makeComboList(i,"<option selected disabled>종류 선택</option>",n.dataObj.codes,"supplier_type"),$("#"+i).replaceWith(combo_html),d<_.length&&$("#"+i).find(`option[value='${_[d].supplier_type}'`).attr("selected",!0),t&&$("#"+i).attr("disabled",!0);i=a("lmo_type_select",d);combo_html=makeComboList(i,"<option selected disabled>종류 선택</option>",n.dataObj.codes,"lmo_type"),$("#"+i).replaceWith(combo_html),d<_.length&&$("#"+i).find(`option[value='${_[d].lmo_type}'`).attr("selected",!0),t&&$("#"+i).attr("disabled",!0);i=a("age_unit",d);combo_html=makeComboList2(i,n.dataObj.codes,"age_unit","w80 mLeft3 pLeft10"),$("#"+i).replaceWith(combo_html),d<_.length&&$("#"+i).find(`option[value='${_[d].age_unit}'`).attr("selected",!0),t&&$("#"+i).attr("disabled",!0);i=a("weight_unit",d);combo_html=makeComboList2(i,n.dataObj.codes,"weight_unit","w80 mLeft3 pLeft10"),$("#"+i).replaceWith(combo_html),d<_.length&&$("#"+i).find(`option[value='${_[d].weight_unit}'`).attr("selected",!0),t&&$("#"+i).attr("disabled",!0);i=a("size_unit",d);combo_html=makeComboList2(i,n.dataObj.codes,"size_unit","w80 mLeft3 pLeft10"),$("#"+i).replaceWith(combo_html),d<_.length&&$("#"+i).find(`option[value='${_[d].size_unit}'`).attr("selected",!0),t&&$("#"+i).attr("disabled",!0),d<_.length&&($("#"+a("male_cnt",d)).val(_[d].male_cnt),$("#"+a("female_cnt",d)).val(_[d].female_cnt),$("#"+a("cnt_sum",d)).val(parseInt(_[d].male_cnt)+parseInt(_[d].female_cnt)),$("#"+a("strain",d)).val(_[d].strain),$("#"+a("week_age",d)).val(_[d].week_age),$("#"+a("weight_gram",d)).val(_[d].weight_gram),$("#"+a("size",d)).val(_[d].size),$("#"+a("supplier_name",d)).val(_[d].supplier_name),$("#"+a("ibc_num",d)).val(_[d].ibc_num),$("#"+a("genetic_type",d)).val(_[d].genetic_type),_[d].lmo_flag>0&&($("#"+a("lmo_flag",d)).prop("checked",!0),$("#"+a("ibc_num",d)).val(""),$("#"+a("genetic_type",d)).val(""),$("#"+a("lmo_type_select",d)).prop("selectedIndex",0))),$("#"+a("male_cnt",d)).on("propertychange change keyup paste input",(function(){var e=Number($("#"+a("male_cnt",d)).val()),t=Number($("#"+a("female_cnt",d)).val());$("#"+a("cnt_sum",d)).val(e+t)})),$("#"+a("female_cnt",d)).on("propertychange change keyup paste input",(function(){var e=Number($("#"+a("male_cnt",d)).val()),t=Number($("#"+a("female_cnt",d)).val());$("#"+a("cnt_sum",d)).val(e+t)})),$("#"+a("lmo_flag",d)).on("change",(function(){var e=$(this).closest("table").parent().attr("id").split("_"),t=Number(e[e.length-1]);$(this).is(":checked")?e.length>0&&($("#"+a("ibc_num",t-1)).val(""),$("#"+a("ibc_num",t-1)).prop("disabled",!0),$("#"+a("ibc_num_button",t-1)).prop("disabled",!0),$("#"+a("genetic_type",t-1)).val(""),$("#"+a("genetic_type",t-1)).prop("disabled",!0),$("#"+a("lmo_type_select",t-1)).prop("selectedIndex",0),$("#"+a("lmo_type_select",t-1)).prop("disabled",!0)):($("#"+a("ibc_num",t-1)).prop("disabled",!1),$("#"+a("ibc_num_button",t-1)).prop("disabled",!1),$("#"+a("genetic_type",t-1)).val("wild type"),$("#"+a("genetic_type",t-1)).removeAttr("disabled"),$("#"+a("lmo_type_select",t-1)).removeAttr("disabled"))}));var p=$("#"+a("lmo_flag",d)).closest("table").parent().attr("id").split("_"),r=Number(p[p.length-1]);if($("#"+a("lmo_flag",d)).is(":checked")?p.length>0&&($("#"+a("ibc_num",r-1)).val(""),$("#"+a("ibc_num",r-1)).prop("disabled",!0),$("#"+a("ibc_num_button",r-1)).prop("disabled",!0),$("#"+a("genetic_type",r-1)).val(""),$("#"+a("genetic_type",r-1)).prop("disabled",!0),$("#"+a("lmo_type_select",r-1)).prop("selectedIndex",0),$("#"+a("lmo_type_select",r-1)).prop("disabled",!0)):($("#"+a("ibc_num",r-1)).prop("disabled",!1),$("#"+a("ibc_num_button",r-1)).prop("disabled",!1),$("#"+a("genetic_type",r-1)).removeAttr("disabled"),$("#"+a("lmo_type_select",r-1)).prop("disabled",!1)),t){var m=d+1;$(`#male_cnt_${m}`).attr("readonly",!0),$(`#female_cnt_${m}`).attr("readonly",!0),$(`#cnt_sum_${m}`).attr("readonly",!0),$(`#strain_${m}`).attr("readonly",!0),$(`#week_age_${m}`).attr("readonly",!0),$(`#size_${m}`).attr("readonly",!0),$(`#weight_gram_${m}`).attr("readonly",!0),$(`#supplier_name_${m}`).attr("readonly",!0),$(`#ibc_num_${m}`).attr("readonly",!0),$(`#genetic_type_${m}`).attr("readonly",!0),$(`#lmo_flag_${m}`).attr("disabled",!0),$(`#ibc_num_${m}`).attr("readonly",!0),$(`#ibc_num_button_${m}`).attr("disabled",!0),$(`#genetic_type_${m}`).attr("readonly",!0),$(`#lmo_type_select_${m}`).attr("disabled",!0),$(`#animal_${m} > .remove_buttons`).remove()}}setTriggerSelectOnChange()}}