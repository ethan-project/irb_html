function originalJSFunction(){}function dataMappingFunc(e){var t=e.getItemData("ea_supplement");$("#ea_supplement").text(t.getStringValue("0"));var n="";t=e.getParentItemData("general_title");$("#name_ko").text(t.getStringValue("name_ko")),$("#name_en").text(t.getStringValue("name_en"));{t=e.getParentItemData("application_info");let i=Number(t.getStringValue("approved_dttm"));$("#approved_dttm").text(getDttm(i).dt),n=getDttm(i).dt+" ~ "}t=e.getParentItemData("general_end_date");$("#general_end_date").text(t.getStringValue("0")),n+=t.getStringValue("0");var i=JSON.parse(COMM.getCookie(CONST.COOKIE.IPSAP_USER_INFO));$(".reviewer").text(spaceAddStr(i.name));var a=$(".list_table").eq(0).children("tbody");a.children("tr").eq(0).children("td").eq(1).text(n),a.children("tr").eq(0).children("td").eq(2).find("input").val(n);var d=[],r=[],p=0,l=e.getParentItemData("animal_sum").dataObj.saved_data.data;for(let e=0;e<l.length;++e)d.push(l[e].animal_code_str),isInArray(r,l[e].mb_grade_str)||r.push(l[e].mb_grade_str),p+=parseInt(l[e].male_cnt),p+=parseInt(l[e].female_cnt);a.children("tr").eq(1).children("td").eq(1).text(d.join()),a.children("tr").eq(1).children("td").eq(2).find("input").val(d.join()),a.children("tr").eq(2).children("td").eq(1).text(r.join()),a.children("tr").eq(2).children("td").eq(2).find("input").val(r.join()),a.children("tr").eq(3).children("td").eq(1).text(p),a.children("tr").eq(3).children("td").eq(2).find("input").val(p);var c=e.getParentItemData("pain_grage"),s=String.fromCharCode(64+Number(c.dataObj.saved_data.data[0].select_ids[0]));a.children("tr").eq(4).children("td").eq(1).text(s),a.children("tr").eq(4).children("td").eq(2).find("input").val(s);var o=e.getParentItemData("euthanasia_method"),_=getValueFromCode(o.dataObj.items,o.dataObj.saved_data.data[0].select_ids[0]);a.children("tr").eq(5).children("td").eq(1).text(_),a.children("tr").eq(5).children("td").eq(2).find("input").val(_);var f=e.getItemData("end_app_summary"),h=JSON.parse(f.getStringValue("0"));a.children("tr").eq(0).children("td").eq(2).find("input").val(h[0]),a.children("tr").eq(1).children("td").eq(2).find("input").val(h[1]),a.children("tr").eq(2).children("td").eq(2).find("input").val(h[2]),a.children("tr").eq(3).children("td").eq(2).find("input").val(h[3]),a.children("tr").eq(4).children("td").eq(2).find("input").val(h[4]),a.children("tr").eq(5).children("td").eq(2).find("input").val(h[5]),a.children("tr").eq(6).children("td").eq(2).find("textarea").val(h[6]);i=JSON.parse(COMM.getCookie(CONST.COOKIE.IPSAP_USER_INFO));$(".reviewer").text(spaceAddStr(i.name)),setAppChangeInfo()}function onClickSubmit(){if(!$("#check_01").is(":checked"))return alert("제출 동의를 확인해 주세요."),void $("#check_01").focus();if(IPSAP.DEMO_MODE)window.location.href="./experiment_list.html";else{var e=[],t=$(".list_table").eq(0).children("tbody");e.push(t.children("tr").eq(0).find("input").val()),e.push(t.children("tr").eq(1).find("input").val()),e.push(t.children("tr").eq(2).find("input").val()),e.push(t.children("tr").eq(3).find("input").val()),e.push(t.children("tr").eq(4).find("input").val()),e.push(t.children("tr").eq(5).find("input").val()),e.push(t.children("tr").eq(6).find("textarea").val()),g_AppItemParser.targetSavedItemNames=[],g_AppItemParser.addMoreSaveTag("end_app_summary",{data:{0:JSON.stringify(e)}}),appItemSubmit(onCompleteSubmit,IPSAP.APP_SUBMIT_TYPE_PARAM.CHILD_SUBMIT)}}function onCompleteSubmit(e,t,n){e?window.location.href="./experiment_list.html":alert(`반입보고서 제출을 실패했습니다.\n(${t.em})`)}function setAppChangeInfo(){urlPath=CONST.API.APPLICATION_CHANGE.ALLINFO,app_seq=g_AppInfo.appSeq;var e=$("#trace_changing").find(".changing-list").clone(),t=$("#trace_changing").find(".changing-list").children("ul").eq(0).clone(),n=$("#trace_changing").find(".changing-list").children("ul").eq(1).clone(),i=$("#trace_changing").find(".changing-list").children("ul").eq(2).clone(),a=$("#trace_changing").find(".changing-list").children("ul").eq(3).clone();$("#trace_changing").empty(),API.load({url:urlPath.replace("${app_seq}",app_seq),type:CONST.API_TYPE.GET,success:function(d){if(!d)return;$(".trace_label").removeClass("hidden");var r=1;let p=d.approved_dttm,l=d.change_apps;listHeader='<div class="flexMid mBot10 mTop20">\n      <h4 class="card-title"><i class="fas fa-plus-square mRight10"></i>변경 내역 <span class="list-num">1</span></h4>\n      <div class="header_comment mLeft25">변경 승인일:<span class="blue_deep mLeft10 list-date">2021-03-02</span></div>\n      </div>',e.empty();for(const[d,x]of Object.entries(p)){var c=e.clone();c.append(listHeader),c.find(".list-num").text(r),r++,c.find(".list-date").text(x);for(const[e,d]of Object.entries(l)){var s=t.clone();if(s.find("span").eq(1).text(d.main_title),x==d.approved_dttm)if("ca_regular_item"==d.item_name){s.find("span").eq(0).text("[정규]");var o,_=JSON.parse(d.contents);"104"==d.target_item?(o=s.find(".data").eq(1).children("div").first().clone(),s.find(".data").eq(1).empty()):s.find(".data").eq(1).text(_[1]),s.find(".data").eq(2).text(_[2]),s.find("span").eq(2).text(IPSAP.APP_MAIN_TAG_NAME[_[0]]);var f=`newWindowPopup('./_popup_application-info.html#form_${_[0]}')`;if(s.find("a").first().attr("onclick",f),d.src?(s.find(".data").eq(3).text(d.org_file_name),s.find(".data").eq(3).attr("href",d.src)):s.find(".data").eq(3).text(""),"104"==d.target_item){var h=JSON.parse(_[1]);for(let e=0;e<h.length;++e){let t=o.clone();t.find("span").eq(0).text(h[e][0]),t.find("span").eq(3).text(h[e][1]),t.find("span").eq(5).text(h[e][2]),t.find("span").eq(6).text(h[e][3]),t.find("span").eq(9).text(h[e][4]),t.find("span").eq(11).text(h[e][5]),s.find(".data").eq(1).append(t)}}c.append(s)}else if("ca_fast_item"==d.item_name){let e={};_=JSON.parse(d.contents);var m=3;if("111"==d.target_item){e=i.clone(),e.find("span").eq(1).text(d.main_title),e.find(".data").eq(2).text(_[2]);var q=e.find(".data").find("tbody").eq(0),u=e.find(".data").find("tbody").eq(1),g=q.children("tr").eq(0),v=u.children("tr").eq(0);e.find(".data").find("tbody").empty(),$.each(d.member_org,(function(e,t){var n=g.clone(),i=t.info;i.tmp_phoneno=i.phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3"),1==t.general_director?n.children("td").eq(0).find("input").prop("checked",!0):(n.children("td").eq(0).find("input").prop("checked",!1),n.children("td").eq(0).find("input").prop("disabled",!0)),1==t.animal_mng_flag?n.children("td").eq(1).find("input").prop("checked",!0):(n.children("td").eq(1).find("input").prop("checked",!1),n.children("td").eq(1).find("input").prop("disabled",!0)),n.children("td").eq(2).text(i.name),n.children("td").eq(3).text(i.dept_str),n.children("td").eq(4).text(i.position_str),n.children("td").eq(5).text(i.major_field_str),n.children("td").eq(6).text(i.tmp_phoneno),q.append(n)})),$.each(d.member_after,(function(e,t){var n=v.clone(),i=t.info;i.tmp_phoneno=i.phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3"),1==t.general_director?n.children("td").eq(0).find("input").prop("checked",!0):(n.children("td").eq(0).find("input").prop("checked",!1),n.children("td").eq(0).find("input").prop("disabled",!0)),1==t.animal_mng_flag?n.children("td").eq(1).find("input").prop("checked",!0):(n.children("td").eq(1).find("input").prop("checked",!1),n.children("td").eq(1).find("input").prop("disabled",!0)),n.children("td").eq(2).text(i.name),n.children("td").eq(3).text(i.dept_str),n.children("td").eq(4).text(i.position_str),n.children("td").eq(5).text(i.major_field_str),n.children("td").eq(6).text(i.tmp_phoneno),u.append(n)}))}else"112"==d.target_item?(e=a.clone(),e.find("span").eq(1).text(d.main_title),e.find(".data").eq(2).text(d.approved_dttm+"~"+d.end_date_org),e.find(".data").eq(3).text(d.approved_dttm+"~"+d.end_date_after),e.find(".data").eq(4).text(_[2]),m=5):(e=n.clone(),e.find("span").eq(1).text(d.main_title),e.removeClass("regular_review"),e.addClass("simple_review"),e.find(".blue_deep").addClass("green"),e.find(".blue_deep").removeClass("blue_deep"),e.find("span").eq(0).text("[신속]"),e.find(".data").eq(1).text(_[1]),e.find(".data").eq(2).text(_[2]),e.find("span").eq(2).text(IPSAP.APP_MAIN_TAG_NAME[_[0]]));d.src?(e.find(".data").eq(m).text(d.org_file_name),e.find(".data").eq(m).attr("href",d.src)):e.find(".data").eq(m).text("");f=`newWindowPopup('./_popup_application-info.html#form_${_[0]}')`;e.find("a").first().attr("onclick",f),c.append(e)}}$("#trace_changing").append(c)}},error:function(){},complete:function(){}})}"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>"),"undefined"==typeof ipsap_item_module_js&&document.write("<script src='/assets/js/ipsap/ipsap_item_module.js'><\/script>"),document.write("<script src='/html/researcher/application_new-0.js'><\/script>"),$((function(){if(g_global_mapping=!1,loadApplicationParams(),$(".task_director_all").text(`(연구 책임자 : ${g_AppInfo.appObj.user_name})`),$(".task_title_ko").text(g_AppInfo.appObj.name_ko),$(".register_num").text(g_AppInfo.appObj.application_no),IPSAP.DEMO_MODE)originalJSFunction();else{let e={"filter.query_items":"end_app_summary,ea_supplement","filter.parent_items":"general_title,general_end_date,application_info,animal_sum,pain_grage,euthanasia_method"};g_AppItemParser=new ItemParser(g_AppInfo.childAppSeq),g_AppItemParser.load(e,dataMappingFunc)}}));