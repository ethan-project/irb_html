"undefined"==typeof ipsap_item_module_js&&document.write("<script src='/assets/js/ipsap/ipsap_item_module.js'><\/script>"),"undefined"==typeof ipsap_application_common_js&&document.write("<script src='/assets/js/ipsap/ipsap_application_common.js'><\/script>"),"undefined"==typeof date_utils_js&&document.write("<script src='/assets/js/common/util/date_utils.js'><\/script>");var g_global_mapping=!0;function loadApplicationParams(){IPSAP.DEMO_MODE||g_AppInfo.loadParams()}function makeLeftStepNavi(){for(var a=window.location.pathname,e=a.substr(a.indexOf("-")+1).replace(".html","").split("_"),p=Number(e[0])-1,t=Number(e[1]),n="",_=0;_<APP_NAVIGATION.IACUC.STEP_CNT;++_){var i=`PAGE_${_+1}_1`,s=`row process_content ${"sub_"+String(APP_NAVIGATION.IACUC.STEP_INFO[_].DOT)}`;p==_&&(s+=` active active_sub_${t}`),n+=`<a href="javascript:void(0);" onclick="APP_NAVIGATION.navigate('${i}');" class="${s}" data-process-num="${_+1}">\n      <span>${APP_NAVIGATION.IACUC.STEP_INFO[_].TITLE}</span>\n      <div class="sub_processes"><div class="sub_process p1"></div><div class="sub_process p2"></div><div class="sub_process p3"></div><div class="sub_process p4"></div><div class="sub_process p5"></div></div>\n    </a>`}$("#application_left_step_navi").html(n),0==g_AppInfo.appSeq&&p<11&&($("#application_left_step_navi").children().not("a.active").attr("onclick",""),$("#application_left_step_navi").children().not("a.active").on("click",(function(a){a.stopPropagation(),$("#modal_alert").modal("show")}))),"/html/researcher/application_new-11_1.html"==a&&($("#application_left_step_navi").find(".process_content").removeClass("active"),$("#application_left_step_navi").find(".process_content:last").addClass("active"),$("#application_left_step_navi").children().not("a.active").attr("onclick",""))}function initApplicationPageNaviBtn(){var a=getPageIdx(g_AppInfo.PageID);a<0||(0==a?($("#app_page_navi_pre_btn").switchClass("btn-outline-warning","btn-outline-secondary"),$("#app_page_navi_pre_btn").removeClass("tippy-btn"),$("#app_page_navi_pre_btn").removeAttr("title data-tippy-animation data-tippy-arrow"),$("#app_page_navi_pre_btn").children("i").removeClass("fa-arrow-left"),0==g_AppInfo.appSeq&&$("#tmp_app_delete_btn").css("display","none")):a==APP_NAVIGATION.IACUC.PAGE_INFO.length-1&&($("#app_page_navi_pre_btn").css("display","none"),$("#app_page_navi_next_btn").css("display","none")))}function validCheckAfterClickNextPage(){di.resolve("validator_nextPage").check()}function validCheckAfterClickTempSave(){di.resolve("validator_tempSave").check()}function getPageIdx(a){for(var e=0;e<APP_NAVIGATION.IACUC.PAGE_INFO.length;++e)if(APP_NAVIGATION.IACUC.PAGE_INFO[e].PAGE_ID==a)return e;return-1}function appNaviPrePage(){var a=getPageIdx(g_AppInfo.PageID);a<=0||appItemSaveTemporary(appNavigationCallback,{PAGE_ID:APP_NAVIGATION.IACUC.PAGE_INFO[a-1].PAGE_ID})}function appNaviNextPage(){var a=getPageIdx(g_AppInfo.PageID);a<0||a>=APP_NAVIGATION.IACUC.PAGE_INFO.length-1||appItemSaveTemporary(appNavigationCallback,{PAGE_ID:APP_NAVIGATION.IACUC.PAGE_INFO[a+1].PAGE_ID})}function saveTemporary(){appItemSaveTemporary(appNavigationCallback)}function appNavigationCallback(a,e,p){var t=getPageIdx(g_AppInfo.PageID);if(a)null!=e.new_info&&(g_AppInfo.appSeq=e.new_info.application_seq,g_AppInfo.appObj=e.new_info,alert("접수번호가 부여되었습니다."));else{if(null==e.obj)return void alert(e.msg);if(null!=e.obj)return e.obj.focus(),void alert(e.msg)}null==p?a?($("#modal_tempSave").modal("show"),$("#btn_keep").on("click",(function(){0==t&&APP_NAVIGATION.navigate("PAGE_1_1")}))):alert(`임시저장을 실패했습니다.\n(${e.em})`):(a||alert(`임시저장을 실패했습니다.\n(${e.em})`),APP_NAVIGATION.navigate(p.PAGE_ID))}function checkValidPageID(a){for(var e=0;e<APP_NAVIGATION.IACUC.PAGE_INFO.length;++e)if(APP_NAVIGATION.IACUC.PAGE_INFO[e].PAGE_ID==a&&APP_NAVIGATION.IACUC.PAGE_INFO[e].URL==$(location).attr("pathname"))return!0;return!1}function tempSaveAppDelete(){var a=CONST.API.APPLICATION.DELETE,e=g_AppInfo.appObj.application_seq;API.load({url:a.replace("${app_seq}",e),type:CONST.API_TYPE.DELETE,success:function(a){},error:function(a){},complete:function(){location.replace("./application_list.html")}})}$((function(){if($(".today_str").text(getToDayStr()),!IPSAP.DEMO_MODE)if($("#appplication_page_navi").load("/html/researcher/sub_inc/application_page_navi.html",(function(){$("#appplication_page_navi").children("div").unwrap(),initApplicationPageNaviBtn()})),makeLeftStepNavi(),0==g_AppInfo.appSeq)$(".register_num").text("임시저장 후 발급"),$(".apptype_date").text("미승인"),$(".task_director_all").text("");else{var a="";switch(parseInt(g_AppInfo.appObj.application_type)){case IPSAP.APPLICATION_TYPE.NEW:a="신규 승인";break;case IPSAP.APPLICATION_TYPE.CHANGE:a="변경 승인";break;case IPSAP.APPLICATION_TYPE.RENEW:a="재승인";break;case IPSAP.APPLICATION_TYPE.BRING:a="반입 보고";break;case IPSAP.APPLICATION_TYPE.CHECKLIST:a="승인 후 점검";break;case IPSAP.APPLICATION_TYPE.END:a="종료 보고"}if(""!=a&&g_global_mapping){$(".apptype_title").text(a),$(".register_num").text(g_AppInfo.appObj.application_no),$(".register_num2").text(g_AppInfo.appObj.application_no),$(".register_num_children").text(g_AppInfo.appObj.application_no),$(".task_title").text(g_AppInfo.appObj.name_ko+"/"+g_AppInfo.appObj.name_en),$(".task_title_ko").text(g_AppInfo.appObj.name_ko),$(".task_title_en").text(g_AppInfo.appObj.name_en),$(".task_sub_title").text(g_AppInfo.appObj.sub_title),$(".task_director").text(g_AppInfo.appObj.user_name),$(".task_director_all").text(`(연구 책임자 : ${g_AppInfo.appObj.user_name})`),$(".task_director_dept").text(g_AppInfo.appObj.user_dept_str),g_AppInfo.appObj.user_phoneno&&(g_AppInfo.appObj.tmp_user_phoneno=g_AppInfo.appObj.user_phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3")),$(".task_director_contact").text(g_AppInfo.appObj.tmp_user_phoneno+" / "+g_AppInfo.appObj.user_email),0==g_AppInfo.appObj.approved_dttm?($(".task_approved_date").text("승인일"),$(".apptype_date").text("미승인"),9!=g_AppInfo.appObj.application_result&&10!=g_AppInfo.appObj.application_result||($(".apptype_date").text(g_AppInfo.appObj.application_result_str),$(".apptype_area").addClass("denied"))):($(".task_approved_date").text(getDttm(g_AppInfo.appObj.approved_dttm).dt),$(".apptype_date").text("승인:"+getDttm(g_AppInfo.appObj.approved_dttm).dt));var e="";switch(g_AppInfo.appObj.judge_type_str){case"IBC":e='<img src="/assets/images/common/IBC_icon_top.png">';break;case"IRB":e='<img src="/assets/images/common/IRB_icon_top.png">';break;default:e='<img src="/assets/images/common/IACUC_icon_top.png">'}$(".card_desc.judge_type_str").html(e+g_AppInfo.appObj.judge_type_str),$(".app_summary>.judge_type_str").html(g_AppInfo.appObj.judge_type_str)}switch(parseInt(g_AppInfo.appObj.application_step)){case 0:default:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(0).addClass("active");break;case 1:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(1).addClass("active");break;case 2:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(2).addClass("active");break;case 3:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(3).addClass("active");break;case 4:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(4).addClass("active");break;case 5:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(5).addClass("active")}}}));