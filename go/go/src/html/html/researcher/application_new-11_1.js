var g_other_userlist;"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>"),document.write("<script src='./application_new-0.js'><\/script>"),document.write("<script src='./sub_inc/3_1_animal.js'><\/script>"),document.write("<script src='./sub_inc/4_1_substance.js'><\/script>"),document.write("<script src='./sub_inc/5_8_substance.js'><\/script>"),document.write("<script src='./sub_inc/6_2_pain_d_anesthetic.js'><\/script>"),document.write("<script src='./sub_inc/7_5_pain_relief_veterinary_mng.js'><\/script>"),$((function(){loadApplicationParams();$(".page-content");function e(){$("#pain_grage_0_4").is(":checked")?($("#pain_d_anesthetic-main_check").prop("disabled",!1),$("#pain_d_etc-main_check").prop("disabled",!1),$("#pain_d_3_text").prop("disabled",!1),$("#pain_e_1-main_check").prop("checked",!1),$("#pain_e_2-main_check").prop("checked",!1),$("#pain_e_3-main_check").prop("checked",!1),$("#pain_e_4_text").prop("disabled",!0)):$("#pain_grage_0_5").is(":checked")?($("#pain_d_anesthetic-main_check").prop("checked",!1),$("#pain_d_etc-main_check").prop("checked",!1),$("#pain_d_3_text").prop("disabled",!0),$("#pain_d_3_text").val(""),$("#pain_e_1-main_check").prop("disabled",!1),$("#pain_e_2-main_check").prop("disabled",!1),$("#pain_e_3-main_check").prop("disabled",!1)):($("#pain_d_anesthetic-main_check").prop("checked",!1),$("#pain_d_etc-main_check").prop("checked",!1),$("#pain_d_3_text").prop("disabled",!0),$("#pain_d_3_text").val(""),$("#pain_e_1-main_check").prop("checked",!1),$("#pain_e_2-main_check").prop("checked",!1),$("#pain_e_3-main_check").prop("checked",!1),$("#pain_e_4_text").prop("disabled",!0),$("#pain_e_4_text").val(""))}function t(t){var i=t.getItemData("iacuc_all").dataObj.sub_items,n="general_title";(o=t.getItemFromList(i,n)).applyTextMapValue(n+"_name_ko","name_ko"),o.applyTextMapValue(n+"_name_en","name_en"),function(){let e=new Date;e.setDate(e.getDate()+6);let t=moment(new Date).format("YYYY-MM-DD"),a=new Date;a.setDate(a.getDate()+1095),$("#general_end_date").on("change",(function(){let i=$("#general_end_date").val().split("-"),n=new Date(i[0],parseInt(i[1]-1),i[2]);e.getTime()>n.getTime()?(alert("오늘로부터 일주일 이후 날짜부터 선택이 가능합니다."),$("#general_end_date").val(t)):a.getTime()<n.getTime()&&(alert("연구 기간은 신청일 기준 3년까지 가능합니다."),$("#general_end_date").val(t))}))}();n="general_end_date";(o=t.getItemFromList(i,n)).applyCalanderValue(n);var _=o.applyCalanderValue(n);$(".task_period").text(_),$("#general_end_date").on("change",(function(){$(".task_period").text($("#general_end_date").val())}));n="general_experiment_cnt";(o=t.getItemFromList(i,n)).applyTextValue();n="general_experiment_degree";(o=t.getItemFromList(i,n)).applyTextValue();n="general_fund_org";(p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("general_fund_org-main_check"))&&$("#input_01-3_group").addClass("collapse").removeClass("show");n="general_fund_org_name";(o=t.getItemFromList(i,n)).applyTextValue();n="general_fund_conflict";null!=(o=t.getItemFromList(i,n))&&o.makeHtmlRadioType(),function(e){var t=e.getItemData("iacuc_all").dataObj.sub_items,a="general_director",i=e.getItemFromList(t,a);if(null==i.dataObj.saved_data)return;i.dataObj.saved_data.data[0].animal_mng_flag=0,i.initMembers();let n=i.dataObj.saved_data.data[0];n.info.tmp_phoneno=n.info.phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3"),n.info.tmp_edu_date=n.info.edu_date.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"),$("#general_director_name").text(n.info.name),$("#general_director_email").text(n.info.email),$("#general_director_dept").text(n.info.dept_str),$("#general_director_edu_date").text(n.info.tmp_edu_date),$("#general_director_position").text(n.info.position_str),$("#general_director_edu_instition").text(n.info.edu_institution_str),$("#general_director_major_field").text(n.info.major_field_str),$("#general_director_edu_course_num").text(n.info.edu_course_num),$("#general_director_phoneno").text(n.info.tmp_phoneno);var _="general_director_select";combo_html=makeComboList(_,"<option selected disabled>경력 선택</option>",i.dataObj.codes,"exp_year_code"),$("#"+_).replaceWith(combo_html),$("#"+_).find(`option[value='${n.exp_year_code}'`).attr("selected",!0),$("#"+_).on("change",(function(){i.changeAttrForMember(n.user_seq,"exp_year_code",this.value)}))}(t),function(e){var t=e.getItemData("iacuc_all").dataObj.sub_items,a=e.getItemFromList(t,"general_expt");null!=a.dataObj.saved_data&&(a.initMembers(),makeExptUserList())}(t);n="general_ref";if(null!=(o=t.getItemFromList(i,n))){o.applyMultiFileValue(5,n,"관련 자료");n="purpose_1";(o=t.getItemFromList(i,n)).makeHtmlCheckList(IPSAP.COL.ODD),o.makeHtmlCheckList(IPSAP.COL.EVEN);n="purpose_2_basic";var p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("purpose_2_basic-main_check");o.makeHtmlCheckList(IPSAP.COL.ODD),o.makeHtmlCheckList(IPSAP.COL.EVEN),p&&$("#input_1_group").addClass("show"),$("#purpose_2_basic").append($("#purpose_2_basic_guide").closest(".app_guide").css({padding:"0 30px 0 18px",height:"40px"}));n="purpose_2_applied",p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("purpose_2_applied-main_check");o.makeHtmlCheckList(IPSAP.COL.ODD),o.makeHtmlCheckList(IPSAP.COL.EVEN),p&&$("#input_2_group").addClass("show"),$("#purpose_2_basic-main_check").on("change",(e=>{$(e.currentTarget).prop("checked")?$("#purpose_2_applied_guide").css({"margin-top":""}):$("#purpose_2_applied_guide").css({"margin-top":"30px"})}));n="purpose_2_test",p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("purpose_2_test-main_check");o.makeHtmlCheckList(),p&&$("#input_3_group").addClass("show"),$("#purpose_2_test_0_4").attr("data-target","#input_3-1_group"),$("#purpose_2_test_0_4").attr("data-toggle","collapse"),$("#purpose_2_test_0_4").is(":checked")&&$("#input_3-1_group").addClass("show");var s=t.getItemData("purpose_2_test2");s.makeHtmlCheckList(IPSAP.COL.ODD),s.makeHtmlCheckList(IPSAP.COL.EVEN);n="purpose_2_nature",p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("purpose_2_nature-main_check"),n="purpose_2_species";(p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("purpose_2_species-main_check"))&&$("#input_5_group").addClass("show");n="purpose_2_training",p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("purpose_2_training-main_check");o.makeHtmlCheckList(),p&&$("#input_6_group").addClass("show"),$("#purpose_2_training_4").is(":checked")&&$("#purpose_2_training_4_input_1").css("display","block");n="purpose_2_forensic",p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("purpose_2_forensic-main_check"),n="purpose_2_gene";(p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("purpose_2_gene-main_check"))&&$("#input_8_group").addClass("show");n="purpose_2_etc_check";(p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("purpose_2_etc_check-main_check"))&&($("#input_9_group").addClass("show"),$("#purpose_2_etc_input").css("display","block"));n="purpose_2_etc_input";(o=t.getItemFromList(i,n)).applyTextValue();n="purpose_duplAgcy";(o=t.getItemFromList(i,n)).makeHtmlCheckList(IPSAP.COL.ODD),o.makeHtmlCheckList(IPSAP.COL.EVEN);n="purpose_3rs_research";(o=t.getItemFromList(i,n)).makeHtmlCheckList();n="purpose_3rs_exam";(o=t.getItemFromList(i,n)).makeHtmlCheckList();n="purpose_3rs_edu";(o=t.getItemFromList(i,n)).makeHtmlCheckList();n="purpose_keyword_special";(o=t.getItemFromList(i,n)).applyKeywordValue(n);n="purpose_keyword_replace";(o=t.getItemFromList(i,n)).applyKeywordValue(n);n="purpose_keyword_reduce";(o=t.getItemFromList(i,n)).applyKeywordValue(n);n="purpose_keyword_refine";(o=t.getItemFromList(i,n)).applyKeywordValue(n),function(){let e=moment(new Date).format("YYYY-MM-DD");$("#purpose_search_date").val(e);let t=new Date;t.setMonth(t.getMonth()-3);let a=new Date;a.setDate(a.getDate()),$("#purpose_search_date").on("change",(function(){let i=$("#purpose_search_date").val().split("-"),n=new Date(i[0],parseInt(i[1]-1),i[2]);t.getTime()>n.getTime()?(alert("최근 3개월 이내의 일자를 선택하세요."),$("#purpose_search_date").val(e)):a.getTime()<n.getTime()&&(alert("오늘 날짜 이후는 선택할 수 없습니다. 최근 3개월 이내의 일자를 선택하세요."),$("#purpose_search_date").val(e))}))}();n="purpose_search_date";(o=t.getItemFromList(i,n)).applyCalanderValue(n);n="purpose_alter_result";null!=(o=t.getItemFromList(i,n))&&o.makeHtmlRadioType(),animalDataMapping(t);n="animal_species_reason_text";(o=t.getItemFromList(i,n)).applyTextValue();n="animal_species_reason_file";(o=t.getItemFromList(i,n)).applyMultiFileValue(1,n,"관련 자료");n="animal_cnt_reason_text";(o=t.getItemFromList(i,n)).applyTextValue();n="animal_cnt_reason_file";(o=t.getItemFromList(i,n)).applyMultiFileValue(1,n,"관련 자료"),substanceDataMapping(t,!1,!0,"#modal_changeSubstance");n="animal_exp_summary_text";(o=t.getItemFromList(i,n)).applyTextValue();n="animal_exp_summary_file";(o=t.getItemFromList(i,n)).applyMultiFileValue(1,n,"관련 자료");n="animal_exp_form";(o=t.getItemFromList(i,n)).makeHtmlCheckList(IPSAP.COL.ODD),o.makeHtmlCheckList(IPSAP.COL.EVEN);n="animal_exp_restraint";(o=t.getItemFromList(i,n)).makeHtmlCheckList();n="animal_exp_identify";(o=t.getItemFromList(i,n)).makeHtmlCheckList(IPSAP.COL.ODD),o.makeHtmlCheckList(IPSAP.COL.EVEN);n="animal_exp_surgical";(p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("animal_exp_surgical-main_check"))&&$("#content_05-5").addClass("show");n="animal_exp_surgical_kind";(o=t.getItemFromList(i,n)).makeHtmlRadioType(IPSAP.COL.HORI);n="animal_exp_surgical_method_text";(o=t.getItemFromList(i,n)).applyTextValue();n="animal_exp_surgical_method_file";(o=t.getItemFromList(i,n)).applyMultiFileValue(1,n,"관련 자료");n="animal_exp_export_time";(o=t.getItemFromList(i,n)).applyTextValue();n="animal_exp_export_reason";(o=t.getItemFromList(i,n)).applyTextValue();n="animal_exp_sample_check";(o=t.getItemFromList(i,n)).makeHtmlCheckList(IPSAP.COL.ODD),o.makeHtmlCheckList(IPSAP.COL.EVEN);n="animal_exp_sample_string";(o=t.getItemFromList(i,n)).applyTextValue();var r=!1;substance_5_8_DataMapping(t);n="substance_dosage_flag";(p=(o=t.getItemData(n,"nosave")).getMainChecked("0"))||(r=!0);n="animal_exp_substance_method2";(o=t.getItemData(n)).applyTextValue(),r&&$("#animal_exp_substance_method2").prop("disabled",!0);n="pain_grage";null!=(o=t.getItemFromList(i,n))&&o.makeHtmlRadioType(),$("input:radio[name=pain_grage_0]").click((function(){4==$(this).val()?($("#pain_d_anesthetic-main_check").prop("disabled",!1),$("#pain_d_etc-main_check").prop("disabled",!1),$("#pain_d_3_text").prop("disabled",!1),$("#pain_e_1-main_check").prop("disabled",!0),$("#pain_e_2-main_check").prop("disabled",!0),$("#pain_e_3-main_check").prop("disabled",!0),$("#pain_e_1-main_check").prop("checked",!1),$("#pain_e_1_text").prop("disabled",!0),$("#pain_e_1_text").val(""),$("#input_06-3_1").removeClass("show"),$("#pain_e_2-main_check").prop("checked",!1),$("#pain_e_2_text").prop("disabled",!0),$("#pain_e_2_text").val(""),$("#input_06-3_2").removeClass("show"),$("#pain_e_3-main_check").prop("checked",!1),$("#pain_e_3_text").prop("disabled",!0),$("#pain_e_3_text").val(""),$("#input_06-3_3").removeClass("show"),$("#pain_e_4_text").val(""),$("#pain_e_4_text").prop("disabled",!0)):5==$(this).val()?($("#pain_d_anesthetic-main_check").prop("disabled",!0),$("#pain_d_3_text").prop("disabled",!0),$("#pain_d_3_text").val(""),$("#pain_d_anesthetic_group").removeClass("show"),$("#pain_d_etc-main_check").prop("disabled",!0),$("#pain_d_etc_text").css("display","none"),$("#pain_d_etc_text").val(""),$("#pain_d_anesthetic-main_check").prop("checked",!1),$("#pain_d_etc-main_check").prop("checked",!1),$("#pain_e_1-main_check").prop("disabled",!1),$("#pain_e_1_text").prop("disabled",!1),$("#pain_e_2-main_check").prop("disabled",!1),$("#pain_e_2_text").prop("disabled",!1),$("#pain_e_3-main_check").prop("disabled",!1),$("#pain_e_3_text").prop("disabled",!1),$("#pain_e_4_text").val(""),$("#pain_e_4_text").prop("disabled",!1)):($("#pain_d_anesthetic-main_check").prop("disabled",!0),$("#pain_d_anesthetic-main_check").prop("checked",!1),$("#pain_d_anesthetic_group").removeClass("show"),$("#pain_d_etc-main_check").prop("disabled",!0),$("#pain_d_etc-main_check").prop("checked",!1),$("#pain_d_etc_text").css("display","none"),$("#pain_d_etc_text").val(""),$("#pain_d_3_text").prop("disabled",!0),$("#pain_d_3_text").val(""),$("#pain_e_1-main_check").prop("disabled",!0),$("#pain_e_1-main_check").prop("checked",!1),$("#pain_e_1_text").prop("disabled",!0),$("#pain_e_1_text").val(""),$("#input_06-3_1").removeClass("show"),$("#pain_e_2-main_check").prop("disabled",!0),$("#pain_e_2-main_check").prop("checked",!1),$("#pain_e_2_text").prop("disabled",!0),$("#pain_e_2_text").val(""),$("#input_06-3_2").removeClass("show"),$("#pain_e_3-main_check").prop("disabled",!0),$("#pain_e_3-main_check").prop("checked",!1),$("#pain_e_3_text").prop("disabled",!0),$("#pain_e_3_text").val(""),$("#input_06-3_3").removeClass("show"),$("#pain_e_4_text").prop("disabled",!0),$("#pain_e_4_text").val(""),$("#pain_relief_veterinary_mng-main_check").prop("checked",!1),$("#pain_relief_veterinary_mng_group").removeClass("show"))}));n="pain_d_anesthetic";(p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("pain_d_anesthetic-main_check"))&&$("#pain_d_anesthetic_group").addClass("show"),mappingPainDAnesthetic(t,!0);n="pain_d_etc";(p=(o=t.getItemData(n)).applyMainCheckValueInCheckBox("pain_d_etc-main_check"))&&$("#pain_d_etc_text").css("display","block");n="pain_d_etc_text";(o=t.getItemData(n)).applyTextValue();n="pain_d_3_text";(o=t.getItemData(n)).applyTextValue(),$("#pain_d_anesthetic-main_check").prop("disabled",!0),$("#pain_d_etc-main_check").prop("disabled",!0),$("#pain_d_3_text").prop("disabled",!0),e();n="pain_e_1";(p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("pain_e_1-main_check"))&&$("#input_06-3_1").addClass("show");n="pain_e_1_text";(o=t.getItemFromList(i,n)).applyTextValue();n="pain_e_2";(p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("pain_e_2-main_check"))&&$("#input_06-3_2").addClass("show");n="pain_e_2_text";(o=t.getItemFromList(i,n)).applyTextValue();n="pain_e_3";(p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("pain_e_3-main_check"))&&$("#input_06-3_3").addClass("show");n="pain_e_3_text";(o=t.getItemFromList(i,n)).applyTextValue();n="pain_e_4_text";(o=t.getItemFromList(i,n)).applyTextValue(),$("#pain_e_1-main_check").prop("disabled",!0),$("#pain_e_2-main_check").prop("disabled",!0),$("#pain_e_3-main_check").prop("disabled",!0),e();n="special_consideration";(o=t.getItemData(n)).makeHtmlCheckList();n="pain_relief_eval_item";(o=t.getItemFromList(i,n)).makeHtmlCheckList();n="pain_relief_eval_cycle1";(o=t.getItemFromList(i,n)).applyTextValue();n="pain_relief_eval_cycle2";(o=t.getItemFromList(i,n)).applyTextValue();n="pain_relief_eval_cycle3";(o=t.getItemFromList(i,n)).applyTextValue();n="pain_relief_end_check";null!=(o=t.getItemData(n))&&o.makeHtmlRadioType(IPSAP.COL.HORI);n="pain_relief_end_reason_1";(o=t.getItemData(n)).applyTextValue();n="pain_relief_end_reason_2";(o=t.getItemData(n)).applyTextValue(),$("#pain_relief_end_reason_2").prop("disabled",!0),$("#pain_relief_end_check_0_1").is(":checked")?($("#pain_relief_end_reason_1").prop("disabled",!1),$("#pain_relief_end_reason_2").prop("disabled",!0),$("#pain_relief_end_reason_2").val("")):$("#pain_relief_end_check_0_2").is(":checked")&&($("#pain_relief_end_reason_2").prop("disabled",!1),$("#pain_relief_end_reason_1").prop("disabled",!0),$("#pain_relief_end_reason_1").val("")),$("input:radio[name=pain_relief_end_check_0]").on("change",(function(){$("#pain_relief_end_check_0_1").is(":checked")?($("#pain_relief_end_reason_1").prop("disabled",!1),$("#pain_relief_end_reason_2").prop("disabled",!0),$("#pain_relief_end_reason_2").val("")):$("#pain_relief_end_check_0_2").is(":checked")&&($("#pain_relief_end_reason_2").prop("disabled",!1),$("#pain_relief_end_reason_1").prop("disabled",!0),$("#pain_relief_end_reason_1").val(""))}));n="pain_relief_psych_medicine";(p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("pain_relief_psych_medicine-main_check"))&&$("#content_07-3").addClass("show");n="pain_relief_psych_m_name";(o=t.getItemFromList(i,n)).applyTextValue();n="pain_relief_psych_m_license";(o=t.getItemFromList(i,n)).applyMultiFileValue(5,n,"마약류 사용허가증 첨부","mRight20 mBot0");n="pain_relief_animal_medicine";(p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("pain_relief_animal_medicine-main_check"))&&$("#content_07-4").addClass("show");n="pain_relief_animal_m_name";(o=t.getItemFromList(i,n)).applyTextValue();n="pain_relief_animal_m_license";(o=t.getItemFromList(i,n)).applyMultiFileValue(5,n,"처방전 첨부","mRight20 mBot0");n="pain_relief_veterinary_mng";var o=t.getItemFromList(i,n);data=t.dataObj.iacuc_all.sub_items.main_pain_grade.sub_items.pain_d.sub_items.pain_d_anesthetic.saved_data.main_select[0],p=!0,0==data&&(p=!1),t.managedItems.pain_relief_veterinary_mng.main_check_id="pain_relief_veterinary_mng-main_check",p&&($("input:checkbox[id='pain_relief_veterinary_mng-main_check']").prop("checked",p),$("#pain_relief_veterinary_mng_group").addClass("show")),$("#pain_relief_veterinary_mng-main_check").attr("disabled",!0),mappingPainReliefVeterinaryMng(t);n="breed_mng_condition";(o=t.getItemFromList(i,n)).makeHtmlCheckList();n="breed_mng_environment";(o=t.getItemFromList(i,n)).makeHtmlRadioType();n="breed_mng_rich_tool";(o=t.getItemFromList(i,n)).makeHtmlCheckList(IPSAP.COL.ODD),o.makeHtmlCheckList(IPSAP.COL.EVEN);n="breed_mng_notrich_reason";(o=t.getItemFromList(i,n)).applyTextValue(),enrichmentPartControl();n="euthanasia_method";(o=t.getItemFromList(i,n)).makeHtmlRadioType(IPSAP.COL.EVEN),o.makeHtmlRadioType(IPSAP.COL.ODD);n="euthanasia_method_reason";(o=t.getItemFromList(i,n)).applyTextValue();n="euthanasia_corpse_1";(o=t.getItemFromList(i,n)).applyTextValue();n="euthanasia_corpse_2";(o=t.getItemFromList(i,n)).applyTextValue();n="euthanasia_share";(o=t.getItemFromList(i,n)).makeHtmlRadioType();n="compliance_matters_agree",p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("compliance_matters_agree-main_check"),n="compliance_matters_pledge",p=(o=t.getItemFromList(i,n)).applyMainCheckValueInCheckBox("compliance_matters_pledge-main_check");$("#istt_name").text(g_AppInfo.appObj.istt_name_ko),1==g_AppInfo.appObj.judge_type?$("#judge_type_kor").text("동물실험윤리위원회"):2==g_AppInfo.appObj.judge_type?$("#judge_type_kor").text("기관생물안전위원회"):3==g_AppInfo.appObj.judge_type&&$("#judge_type_kor").text("기관생명윤리위원회");n="self_inspection";var c=(o=t.getItemData(n)).dataObj.codes,l=o.getStringValue("0").split(",");t.addMoreSaveTag(n,{data:{0:l}}),$("#inspection_list").empty(),c.forEach((function(e,t){var a="",i="",n="",_=t+1;t<9?(a="ins_check_0"+_,i="ins_toggle_0"+_,n="#form_0"+_):(a="ins_check_"+_,i="ins_toggle_"+_,n="#form_"+_),4!=_&&$(n).attr("id",e.link_item_name);var p=e.sub_items,s=`<ul class='list-group focus_area' data-focus-to='${"#"+e.link_item_name}'>\n                    <li class='list-group-item list_group_title' data-move-to='${"#"+e.link_item_name}'>${e.contents}\n                      <span class='light mLeft15'><i class='fas fa-angle-left mRight5'></i>신청서 보기</span>\n                    </li>\n                    <div id ='${e.link_item_name+_}'></div>\n                   </ul>\n                  `;$("#inspection_list").append(s),$.each(p,(function(t,n){ins_check=a+"-"+(t+1),ins_toggle=i+"-"+(t+1);var p="";p=0==n.has_switch?`<li class="list-group-item flexMid">\n                        <div class="custom-control custom-checkbox w30">\n                        <input type="checkbox" name="${ins_check}" class="custom-control-input" id="${ins_check}">\n                        <label class="custom-control-label" for="${ins_check}"></label>\n                        </div>\n                      <label class="flex_1" for="${ins_check}">${n.contents}</label>\n                   </li>`:`<li class="list-group-item flexMid">\n                    <div class="custom-control custom-checkbox w30">\n                      <input type="checkbox" name="${ins_check}" class="custom-control-input" id="${ins_check}">\n                      <label class="custom-control-label" for="${ins_check}"></label>\n                    </div>\n                    <label class="flex_1 flexMid" for="${ins_check}">\n                      <span>${n.contents}</span>\n                      <div class="custom-control custom-switch switch-primary mHside10">\n                        <input type="checkbox" class="custom-control-input" id="${ins_toggle}" data-custom-toggle='disabled' data-target='${"#"+ins_check}'>\n                        <label class="custom-control-label w80" for="${ins_toggle}">해당사항 없음</label>\n                      </div>\n                    </label>\n                  </li>`,$("#"+e.link_item_name+_).append(p);for(var s=0;s<l.length;s++)l[s].split(":")[0]==n.is_seq&&(1==n.has_check&&1==l[s].split(":")[1].charAt(0)&&$(`input:checkbox[id="${ins_check}"]`).attr("checked",!0),1==n.has_switch&&1==l[s].split(":")[1].charAt(1)&&($(`input:checkbox[id="${ins_toggle}"]`).attr("checked",!0),$(`input:checkbox[id="${ins_check}"]`).attr("disabled",!0),$(`input:checkbox[id="${ins_check}"]`).attr("checked",!1)))}))})),a(),selfInspectionCheckbox()}}var a=function(){var e=!0;$(".modal.draggable>.modal-dialog").draggable({drag:function(e,t){t.position.top<=0&&(t.position.top=0),t.position.top>=window.innerHeight-80&&(t.position.top=window.innerHeight-80)},cursor:"move",handle:".modal-header"}),$(".modal.draggable>.modal-dialog>.modal-content>.modal-header").css("cursor","move"),$(".modal.draggable>.modal-dialog").on({"click drag":function(t){$(".modal_hint").hide(),e&&($(".modal[data-backdrop=false]").css({"background-color":"rgba(0,0,0, 0.0)","pointer-events":"none"}),$(".modal-dialog-centered.ui-draggable").css({"justify-content":"flex-start"}),"click"==t.type&&$(this).css({"margin-right":"0",left:"0",top:"0"})),e=!1,"drag"==t.type&&$(".btn_shrink i").switchClass("fa-arrow-up","fa-arrow-down")}}),$(".modal.fade").each((function(e,t){$(t).hasClass("in")&&$(t).modal("show"),"modal_inspection"==$(t).attr("id")&&$("body").css({overflow:"auto"})})),$("[data-focus-to]").on({mouseenter:function(e){let t=$(this),a=$(this).data("focus-to");t.siblings(".list-group").removeClass("active"),$(".app_header").removeClass("active"),t.addClass("active"),$(a).next(".content_wrapper").length?$(a).next(".content_wrapper").find(".app_header").addClass("active"):$(a).nextUntil(".app_anchor").filter(".app_header").addClass("active"),"#main_substance"==a&&$(a).children().find(".app_header").addClass("active")}}),setTriggerDataMoveTo(),$("a.disabled").attr({title:"자가점검표를 이용해서 이동할 수 있습니다."}),$("a.disabled").on({click:function(e){alert("자가점검 단계에서는\n자가점검표의 각 번호를 클릭하여 이동할 수 있습니다.")}}),$(".continue").on({click:function(e){$("#modal_inspection").modal("show")}})};a(),g_AppItemParser=new ItemParser(g_AppInfo.appSeq),g_AppItemParser.load({"filter.query_items":"iacuc_all,self_inspection","filter.guide_items":"iacuc_all,self_inspection"},t),function(){let e=CONST.API.INSTITUTION.USER;API.load({url:e.replace("${inst_seq}",g_AppInfo.appObj.institution_seq),type:CONST.API_TYPE.GET,data:{"filter.user_type":IPSAP.USER_TYPE.RESEARCHER},success:function(e){g_other_userlist=e}})}(),$(document).on("click",".btn-staff-delete",(function(){if($(this).closest("tr").find("input:radio").is(":checked"))return!1;var e=$(this).closest("tr").attr("data-id"),t=$(this).closest("tr").attr("item_name");g_AppItemParser.removeMembers(t,e),$(this).closest("tr").remove()})),$(".specificity-add").on("click",(function(){let e=$("input:text[name=specificity]");var t="purpose_keyword_special";$(e).each((function(e,a){$(a).val().length>0&&g_AppItemParser.addNewKeyword(t,$(a).val())})),e.val(""),g_AppItemParser.refreshKeyword(t)})),$(".replacement-add").on("click",(function(){let e=$("input:text[name=replacement]");var t="purpose_keyword_replace";$(e).each((function(e,a){$(a).val().length>0&&g_AppItemParser.addNewKeyword(t,$(a).val())})),e.val(""),g_AppItemParser.refreshKeyword(t)})),$(".reduction-add").on("click",(function(){let e=$("input:text[name=reduction]");var t="purpose_keyword_reduce";$(e).each((function(e,a){$(a).val().length>0&&g_AppItemParser.addNewKeyword(t,$(a).val())})),e.val(""),g_AppItemParser.refreshKeyword(t)})),$(".refinement-add").on("click",(function(){let e=$("input:text[name=refinement]");var t="purpose_keyword_refine";$(e).each((function(e,a){$(a).val().length>0&&g_AppItemParser.addNewKeyword(t,$(a).val())})),e.val(""),g_AppItemParser.refreshKeyword(t)})),$(document).on("click",".keyword-delete",(function(){var e=$(this).parent(),t=e.attr("keyword"),a=e.attr("item_name");g_AppItemParser.removeKeyword(a,t),e.remove()})),setAgreeDate();var i=function(e,t){this.phase="page11_1",this.btn_type=t};i.prototype.check=function(){g_AppItemParser.deleteSaveTag(["substance_dosage_flag","substance_dosage_name","substance_danger_flag","substance_danger_pathogen","substance_dangerous","substance_ibc_number","substance_possible_flag"]),"tempSave"==this.btn_type?appItemSaveTemporary(finalNavigationCallback):appItemSubmit(submitCallback)},di.autowired(!1).register("validator_tempSave").as(i).withConstructor().withProperties().prop("btn_type").val("tempSave").register("validator_submit").as(i).withConstructor().withProperties().prop("btn_type").val("submit"),$("#ins_temp_save").on({click:function(e){setSelfInspection(),di.resolve("validator_tempSave").check()}}),$("#ins_submit").on({click:function(e){setSelfInspection(!0)&&di.resolve("validator_submit").check()}})}));var selfInspectionCheckbox=function(){$('input:checkbox[id*="ins_check"], input:checkbox[id*="ins_toggle"]').on("change",(function(){"toggle"==$(this).attr("id").split("_")[1]?$(this).is(":checked")?$(this).parent().parent().siblings().find("input:checkbox").prop("disabled",!0):$(this).parent().parent().siblings().find("input:checkbox").removeAttr("disabled"):$(this).is(":checked")?$(this).parent().siblings().children().find("input:checkbox").prop("disabled",!0):$(this).parent().siblings().children().find("input:checkbox").removeAttr("disabled")}))},setSelfInspection=function(e){var t="",a=!1;return codes=g_AppItemParser.dataObj.self_inspection.codes,codes.forEach((function(i,n){if(a)return!1;var _="",p="",s=n+1;n<9?(_="ins_check_0"+s,p="ins_toggle_0"+s):(_="ins_check_"+s,p="ins_toggle_"+s);var r=i.sub_items;$.each(r,(function(n,s){var o="#"+_+"-"+(n+1),c="#"+p+"-"+(n+1),l="0",d="0",m=!1;if(1==s.has_switch&&$(c).is(":checked")&&(d="1",m=!0),$(o).is(":checked")&&(l="1",m=!0),e&&!m){var h=r[n].contents;return 1==s.has_switch&&(h=h.substring(10)),alert("자가점검표!\n"+i.contents+"\n"+h+" \n항목을 확인해 주시기 바랍니다."),a=!0,!1}t+=s.is_seq+":"+l+d+","}))})),t=t.slice(0,-1),g_AppItemParser.addMoreSaveTag("self_inspection",{data:{0:t}}),!a};function makeExptUserList(){var e="general_expt",t=g_AppItemParser.getItemData(e),a='<tbody id="general_expt">';let i=g_AppItemParser.managedItems[e].member;$.each(i,(function(e,i){i.info.tmp_phoneno=i.info.phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3"),i.info.tmp_edu_date=i.info.edu_date.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3");var n=`general_expt_${i.user_seq}_select`,_=`general_expt_${i.user_seq}_radio`;combo_html=makeComboList(n,"<option selected disabled>경력</option>",t.dataObj.codes,"exp_year_code"),a+=`\n      <tr data-id="${i.user_seq}" item_name="general_expt">\n        <td>\n          <div class="custom-radio">\n            <input type="radio" id="${_}" name="exp_manager" value="${i.user_seq}">\n          </div>\n        </td>\n        <td>${i.info.name}</td>\n        <td>${i.info.dept_str}</td>\n        <td>${i.info.position_str}</td>\n        <td>${i.info.major_field_str}</td>\n        <td>${i.info.tmp_phoneno}</td>\n        <td>${i.info.email}</td>\n        <td>${i.info.edu_course_num}</td>\n        <td>${i.info.edu_institution_str}</td>\n        <td>${combo_html}</td>\n        <td>\n          <a href="javascript:void(0);" class="btn btn-xs btn-outline-danger btn-staff-delete"><i class="far fa-trash-alt mRight5"></i>삭제</a>\n        </td>\n      </tr>`})),a+='\n  <tr class="add_row">\n    <td colspan="11">\n      <a href="javascript:void(0);" onclick="openModelOtherStaff();" class="btn btn-xs btn-outline-primary" ><i class="fas fa-user-plus mRight5"></i>실험 수행자 선택 추가</a>\n    </td>\n  </tr>\n  </tbody>',$("#general_expt").replaceWith(a),$("#general_expt").children().eq(0).find("input").prop("checked",!0),$.each(i,(function(e,a){var i=`general_expt_${a.user_seq}_radio`;a.animal_mng_flag>0&&$("#"+i).prop("checked",!0);var n=`general_expt_${a.user_seq}_select`;$("#"+n).find(`option[value='${a.exp_year_code}'`).attr("selected",!0),$("#"+n).on("change",(function(){t.changeAttrForMember(a.user_seq,"exp_year_code",this.value)}))})),$("input[name=exp_manager]").on("change",(function(){var e=Number($(this).val());t.changeAttrForMember(e,"animal_mng_flag",1)}))}function enrichmentPartControl(){$("[id^=breed_mng_rich_tool]").find("input:checkbox").on("change",(function(){$("#breed_mng_rich_tool_odd").find("input:checkbox:checked").length>0||$("#breed_mng_rich_tool_even").find("input:checkbox:checked").length>0?($("#breed_mng_notrich_reason").val(""),$("#breed_mng_notrich_reason").prop("disabled",!0)):$("#breed_mng_notrich_reason").prop("disabled",!1)})),$("#breed_mng_rich_tool_odd").find("input:checkbox:checked").length>0||$("#breed_mng_rich_tool_even").find("input:checkbox:checked").length>0?($("#breed_mng_notrich_reason").val(""),$("#breed_mng_notrich_reason").prop("disabled",!0)):$("#breed_mng_notrich_reason").prop("disabled",!1)}function openModelOtherStaff(){makeOtherStaffList(),$("#modal_staff").modal("show")}function onStaffSelect(e){$.each(g_other_userlist,(function(t,a){if(Number(a.user_seq)==e&&!g_AppItemParser.hasMemberExists(a.user_seq))return g_AppItemParser.insertMember("general_expt",a),makeExptUserList(),void $("#modal_staff").modal("hide")}))}function makeOtherStaffList(){let e='<tbody id="other-staff">';$.each(g_other_userlist,(function(t,a){var i=a.user_type.split(",");g_AppItemParser.hasMemberExists(a.user_seq)||-1==$.inArray("3",i)||(a.tmp_phoneno=a.phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3"),e+=`\n        <tr class="staff-row" onclick="onStaffSelect(${a.user_seq})">\n          <td>${a.name}</td>\n          <td>${a.dept_str}</td>\n          <td>${a.position_str}</td>\n          <td>${a.major_field_str}</td>\n          <td>${a.tmp_phoneno}</td>\n          <td>${a.email}</td>\n          <td>${a.edu_course_num}</td>\n          <td>${a.edu_institution_str}</td>\n        </tr>`)})),e+="</tbody>",$("#other-staff").replaceWith(e),initDataTable("#researcher_list")}function setAgreeDate(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate(),n=t+"년 "+(a=a>=10?a:"0"+a)+"월 "+(i=i>=10?i:"0"+i)+"일";$(".agree_date").text(n)}function submitCallback(e,t,a){e?location.replace("/html/researcher/application_list.html"):appSubmitHandleError("저장을 실패했습니다.",t)}function finalNavigationCallback(e,t,a){e?$("#modal_tempSave_inspection").modal("show"):appSubmitHandleError("임시저장을 실패했습니다.",t)}function gotoLastPage(){APP_NAVIGATION.navigate("PAGE_10_1")}function saveInspection(){g_AppItemParser.targetSavedItemNames=["self_inspection"],setSelfInspection(),appItemSaveTemporary(),newWindowPopup("./_popup_inspection-info.html")}function redirectStepFirst(){g_AppInfo.PageID="PAGE_1_1",g_AppInfo.saveParamsAndNavigate(APP_NAVIGATION.IACUC.PAGE_INFO[0].URL)}$("#modal_inspection, #modal_alert").on("hidden.bs.modal",(e=>{$(e.currentTarget).modal("show")}));