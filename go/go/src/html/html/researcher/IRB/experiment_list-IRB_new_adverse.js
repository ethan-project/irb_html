var g_managedItems,g_dataObj;function dataMappingFunc(e){var a=e.getItemData("general_title","nosave");$("#name_ko").text(a.getStringValue("name_ko")),$("#name_en").text(a.getStringValue("name_en"));{a=e.getItemData("application_info");let t=Number(a.getStringValue("approved_dttm"));$("#approved_dttm").text(getDttm(t).dt),getDttm(t).dt+" ~ "}a=e.getItemData("general_end_date","nosave");$("#general_end_date").text(a.getStringValue("0")),a.getStringValue("0"),setExpCategory(e),setAgreeDate(),$(".reviewer").text(spaceAddStr(g_AppInfo.appObj.user_name));var t="abnorm_reaction_info_eng_initial";(a=e.getItemData(t)).applyTextValue(t);t="abnorm_reaction_info_code";(a=e.getItemData(t)).applyTextValue(t);t="abnorm_reaction_info_birth";(a=e.getItemData(t)).applyCalanderValue(t);t="abnorm_reaction_info_gender";(a=e.getItemData(t)).makeHtmlRadioType(),$("#abnorm_reaction_info_gender").children().eq(1).removeClass("mTop10"),$("#abnorm_reaction_info_gender").children().eq(1).addClass("mLeft20");t="abnorm_reaction_method";(a=e.getItemData(t)).applyTextValue(t);t="abnorm_reaction_exp_date";(a=e.getItemData(t)).applyCalanderValue(t);t="abnorm_reaction_date";(a=e.getItemData(t)).applyCalanderValue(t);var n=(a=e.getItemData("abnorm_reaction_check")).getStringValue("0"),r=new Object;""!=n&&(r=n.split(",")),$("input:checkbox[name=abnorm_reaction_check]").each((function(e){isInArray(r,this.value)&&(this.checked=!0)}));t="abnorm_reaction_death_date";(a=e.getItemData(t)).applyCalanderValue(t);t="abnorm_reaction_hospital_date";(a=e.getItemData(t)).applyCalanderValue(t);t="abnorm_reaction_contents_etc_text";(a=e.getItemData(t)).applyTextValue(t);t="abnorm_reaction_detail";(a=e.getItemData(t)).applyTextValue(t);t="abnorm_reaction_expect_flag";(a=e.getItemData(t)).makeHtmlRadioType();t="abnorm_reaction_causality_flag";(a=e.getItemData(t)).makeHtmlRadioType();t="abnorm_reaction_treat";(a=e.getItemData(t)).applyTextValue(t);t="abnorm_reaction_participant_continue_flag";(a=e.getItemData(t)).makeHtmlRadioType();t="abnorm_reaction_form_edit_flag";(a=e.getItemData(t)).makeHtmlRadioType();t="abnorm_reaction_sign";(a=e.getItemData(t)).applyMainCheckValueInCheckBox("abnorm_reaction_sign-main_check"),g_managedItems=e.managedItems,g_dataObj=e.dataObj,$(".card").removeClass("hidden")}function appendExpCategory(e){$("#exp_category").empty();var a='<label class="mRight10 mBot0 sum_label">실험 분류:</label>';for(let t=0;t<e.length;t++)a+=`<button type="button" class="btn btn-outline-primary btn-round btn_tag btn_tag_sm mRight5">\n                ${e[t]}\n              </button>`;$("#exp_category").append(a)}function setExpCategory(e){var a=[],t="general_object";1==e.getItemData(t,"nosave").getStringValue("0")?a.push("심의 대상"):a.push("면제 대상");t="general_human_research";1==e.getItemData(t,"nosave").getStringValue("0")&&a.push("인간대상 연구");t="general_body_research";1==e.getItemData(t,"nosave").getStringValue("0")&&a.push("인체 유래물 연구"),appendExpCategory(a)}function setAgreeDate(){var e=new Date,a=e.getFullYear(),t=e.getMonth()+1,n=e.getDate(),r=a+"년 "+(t=t>=10?t:"0"+t)+"월 "+(n=n>=10?n:"0"+n)+"일";$(".agree_date").text(r)}function onClickSubmit(){if(!$("#abnorm_reaction_sign-main_check").is(":checked"))return alert("제출 동의를 확인해 주세요."),void $("#abnorm_reaction_sign-main_check").focus();var e={parent_app_seq:g_AppItemParser.app_seq,application_type:IPSAP.APPLICATION_TYPE.ADVERSE,judge_type:g_AppInfo.appObj.judge_type},a=new ItemParser(0);a.targetSavedItemNames=Object.keys(g_managedItems),a.managedItems=g_managedItems,a.dataObj=g_dataObj,a.addMoreSaveTag("application_info",{data:e});var t=[];$("input:checkbox[name=abnorm_reaction_check]").each((function(){this.checked&&t.push(this.value)}));var n=new Object;n[0]=t.toString(),a.addMoreSaveTag("abnorm_reaction_check",{data:n}),appItemSubmitWithParser(a,onCompleteSubmit,IPSAP.APP_SUBMIT_TYPE_PARAM.CHILD_SUBMIT)}function onCompleteSubmit(e,a,t){e?window.location.href="../experiment_list.html":alert(`중대한 이상반응 보고서 제출을 실패했습니다.\n(${a.em})`)}"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>"),document.write("<script src='/html/researcher/IRB/common_application_new-IRB.js'><\/script>"),$(document).ready((function(){loadApplicationParams(),$(".task_director_all").text(`(연구 책임자 : ${g_AppInfo.appObj.user_name})`),$(".task_title_ko").text(g_AppInfo.appObj.name_ko),g_AppItemParser=new ItemParser(g_AppInfo.appSeq),g_AppItemParser.load({"filter.query_items":"general_title,general_end_date,application_info,abnorm_reaction,general_object,general_human_research,general_body_research"},dataMappingFunc)}));