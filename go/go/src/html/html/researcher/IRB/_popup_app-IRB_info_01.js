"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>"),document.write("<script src='/html/researcher/IRB/common_application_new-IRB.js'><\/script>");var g_general_obj_value=0,checkBoxId1="#general_experiment_method_etc_check-main_check",checkBoxId2="#general_experiment_purpose_etc_check-main_check",checkBoxId3="#general_investgate_etc_check-main_check";function mappingGeneralDirectorReadOnly(e){var a=e.getItemData("general_director");if(null==a.dataObj.saved_data)return;a.initMembers();let t=a.dataObj.saved_data.data[0];t.info.tmp_phoneno=t.info.phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3"),t.info.tmp_edu_date=t.info.edu_date.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"),t.exp_year_str="",1==t.exp_year_code?t.exp_year_str="1년 미만":2==t.exp_year_code?t.exp_year_str="1년 ~ 3년":t.exp_year_str="3년 이상",$("#general_director_name").text(t.info.name),$("#general_director_email").text(t.info.email),$("#general_director_dept").text(t.info.dept_str),$("#general_director_edu_date").text(t.info.tmp_edu_date),$("#general_director_position").text(t.info.position_str),$("#general_director_edu_instition").text(t.info.edu_institution_str),$("#general_director_major_field").text(t.info.major_field_str),$("#general_director_edu_course_num").text(t.info.edu_course_num),$("#general_director_phoneno").text(t.info.tmp_phoneno),$("#general_director_select").text(t.exp_year_str)}function mappingGeneralExptReadOnly(e){var a=e.getItemData("general_expt");null!=a.dataObj.saved_data&&(a.initMembers(),makeExptUserListReadOnly())}function makeExptUserListReadOnly(){var e="general_expt",a=g_AppItemParser.getItemData(e),t='<tbody class="data" id="general_expt">';let n=a.dataObj.saved_data.data;$.each(n,(function(e,a){a.info.tmp_phoneno=a.info.phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3"),a.info.tmp_edu_date=a.info.edu_date.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"),a.exp_year_str="",1==a.exp_year_code?a.exp_year_str="1년 미만":2==a.exp_year_code?a.exp_year_str="1년 ~ 3년":a.exp_year_str="3년 이상",t+=`\n        <tr data-id="${a.user_seq}" item_name="general_expt">\n            <td>${a.exp_type_code_str}</td>\n            <td>${a.info.name}</td>\n            <td>${a.info.dept_str}</td>\n            <td>${a.info.position_str}</td>\n            <td>${a.info.tmp_phoneno}</td>\n            <td class="ellipsis max_w150" title="${a.info.email}">${a.info.email}</td>\n            <td>${a.info.edu_course_num}</td>\n            <td>${a.info.edu_institution_str}</td>\n            <td>${a.exp_year_code_str}</td>\n        </tr>\n        `})),$("#general_expt").replaceWith(t),t+="</tbody>"}$(document).ready((function(){function e(){var e=[];1==$("input:radio[name ='general_object']:checked").val()?($(".general_judgement_area").removeClass("hidden"),e.push("심의 대상")):($(".general_judgement_area").addClass("hidden"),e.push("심의 면제")),$('input:checkbox[id="general_human_research"]').is(":checked")&&e.push("인간대상 연구"),$('input:checkbox[id="general_body_research"]').is(":checked")&&e.push("인체 유래물 연구"),function(e){$("#select_content").empty();var a='<span class="fw_bold mRight10">선택 항목:</span>';for(let t=0;t<e.length;t++)a+=`<button type="button" class="btn btn-outline-primary btn-round btn_tag mRight5"> \n                  ${e[t]}\n                </button>`;$("#select_content").append(a)}(e)}function a(){$("#general_experiment").is(":checked")?($("input:checkbox[name=human_experiment_check]").each((function(e){this.value>=17&&this.value<=23&&(this.disabled=!1)})),$(checkBoxId1).attr("disabled",!1),$(checkBoxId2).attr("disabled",!1)):($("input:checkbox[name=human_experiment_check]").each((function(e){this.value>=17&&this.value<=23&&(this.checked=!1,this.disabled=!0)})),$(checkBoxId1).is(":checked")&&($(checkBoxId1).prop("checked",!1),$("#input_01_4-4_4_group").removeClass("show"),$("#general_experiment_method_etc_input").val("")),$(checkBoxId1).attr("disabled",!0),$(checkBoxId2).is(":checked")&&($(checkBoxId2).prop("checked",!1),$("#input_01_4-6_5_group").removeClass("show"),$("#general_experiment_purpose_etc_input").val("")),$(checkBoxId2).attr("disabled",!0))}function t(){$("#investgate").is(":checked")?($("input:checkbox[name=human_experiment_check]").each((function(e){this.value>=25&&this.value<=30&&(this.disabled=!1)})),$(checkBoxId3).attr("disabled",!1)):($("input:checkbox[name=human_experiment_check]").each((function(e){this.value>=25&&this.value<=30&&(this.checked=!1,this.disabled=!0)})),$(checkBoxId3).is(":checked")&&($(checkBoxId3).prop("checked",!1),$("#input_01_4-6_7_group").removeClass("show"),$("#general_investgate_etc_input").val("")),$(checkBoxId3).attr("disabled",!0))}function n(n){var _="general_title";(c=n.getItemData(_)).applyTextMapValueReadOnly(_+"_name_ko","name_ko"),c.applyTextMapValueReadOnly(_+"_name_en","name_en");_="general_end_date";var c=n.getItemData(_);if($("#general_end_date").text(c.applyTextValueReadOnly()),0!=g_AppInfo.appObj.approved_dttm){let e=getDateDiffWith10($("#general_end_date").val(),g_AppInfo.appObj.tmp_approved_dttm.dt);$("#total_date").text("총 "+e+" 일")}else $("#total_date").text("위원회 승인 이후부터 실험 일수를 계산합니다.");_="general_fund_org";(p=(c=n.getItemData(_)).applyMainCheckValueInCheckBoxReadOnly("general_fund_org-main_check"))&&($("#general_fund_org-main_check").attr("onclick","return false;"),$("#input_01-3_group").addClass("collapse").removeClass("show"));_="general_fund_org_name";(c=n.getItemData(_)).applyTextValueReadOnly();_="general_fund_conflict";null!=(c=n.getItemData(_))&&c.makeHtmlRadioTypeReadOnly(),mappingGeneralDirectorReadOnly(n),mappingGeneralExptReadOnly(n);_="general_object";var l=(c=n.getItemData(_)).getStringValue("0");$(`input:radio[name ='general_object']:input[value='${l}']`).click(),$("input:radio[name ='general_object']").prop("readonly",!0),g_general_obj_value=l;_="general_human_research";1==(l=(c=n.getItemData(_)).getStringValue("0"))?($('input:checkbox[id="general_human_research"]').attr("checked",!0),$(".general_human_research").removeClass("hidden")):$('input:checkbox[id="general_human_research"]').attr("checked",!1),$('input:checkbox[id="general_human_research"]').prop("readonly",!0);_="general_body_research";1==(l=(c=n.getItemData(_)).getStringValue("0"))?($('input:checkbox[id="general_body_research"]').attr("checked",!0),$(".general_body_research").removeClass("hidden")):$('input:checkbox[id="general_body_research"]').attr("checked",!1),$('input:checkbox[id="general_body_research"]').prop("readonly",!0);_="general_judgement",l=(c=n.getItemData(_)).getStringValue("0");if($(`input:radio[name ='general_judgement']:input[value='${l}']`).click(),$("input:radio[name ='general_judgement']").prop("readonly",!0),e(),2==g_general_obj_value){_="general_exempt_reason_text";(c=n.getItemData(_)).applyTextValueReadOnly(_);_="general_exempt_reason_file";(c=n.getItemData(_)).applyMultiFileValueReadOnly(_,"관련 자료"),$(".general_exempt_reason").removeClass("hidden")}{let e=JSON.parse(COMM.getCookie("institution_info")).name_ko;$(".inst_name").text(e)}_="general_human_all";(c=n.getItemData(_)).applyTextValueReadOnly();_="general_human_institution";(c=n.getItemData(_)).applyTextValueReadOnly();var r="human_experiment_check",i=(l=(c=n.getItemData(r)).getStringValue("0"),new Object);""!=l&&(i=l.split(",")),$("input:checkbox[name=human_experiment_check]").each((function(e){isInArray(i,this.value)&&(this.checked=!0,3==this.value&&$("#form_01-4-2_3_group").addClass("show"))}));_="general_recruit_etc_check";var p=(c=n.getItemData(_)).applyMainCheckValueInCheckBox("general_recruit_etc_check-main_check"),d="general_recruit_etc_input";n.getItemData(d).applyTextValueReadOnly(),p?($("#input_01_4-3_4_group").addClass("show"),$(`#${d}`).css("display","block")):$(`#${d}`).val("");_="general_experiment_method_etc_check",p=(c=n.getItemData(_)).applyMainCheckValueInCheckBox("general_experiment_method_etc_check-main_check"),d="general_experiment_method_etc_input";n.getItemData(d).applyTextValueReadOnly(),p?($("#input_01_4-4_4_group").addClass("show"),$(`#${d}`).css("display","block")):$(`#${d}`).val("");_="general_experiment_purpose_etc_check",p=(c=n.getItemData(_)).applyMainCheckValueInCheckBox("general_experiment_purpose_etc_check-main_check"),d="general_experiment_purpose_etc_input";n.getItemData(d).applyTextValueReadOnly(),p?($("#input_01_4-6_5_group").addClass("show"),$(`#${d}`).css("display","block")):$(`#${d}`).val("");_="general_investgate_etc_check",p=(c=n.getItemData(_)).applyMainCheckValueInCheckBox("general_investgate_etc_check-main_check"),d="general_investgate_etc_input";n.getItemData(d).applyTextValueReadOnly(),p?($("#input_01_4-6_7_group").addClass("show"),$(`#${d}`).css("display","block")):$(`#${d}`).val(""),a(),t();_="general_body_all";(c=n.getItemData(_)).applyTextValueReadOnly();_="general_body_institution";(c=n.getItemData(_)).applyTextValueReadOnly();r="general_body_research_check",l=(c=n.getItemData(r)).getStringValue("0"),i=new Object;""!=l&&(i=l.split(",")),$("input:checkbox[name=general_body_research_check]").each((function(e){isInArray(i,this.value)&&(this.checked=!0)}));_="general_sample_type_etc_check",p=(c=n.getItemData(_)).applyMainCheckValueInCheckBoxReadOnly("general_sample_type_etc_check-main_check"),d="general_sample_type_etc_input";n.getItemData(d).applyTextValueReadOnly(),p?($("#input_01_4-9_5_group").addClass("show"),$(`#${d}`).css("display","block")):$(`#${d}`).val("");_="general_collect_check",p=(c=n.getItemData(_)).applyMainCheckValueInCheckBoxReadOnly("general_collect_check-main_check"),d="general_collect_input";n.getItemData(d).applyTextValueReadOnly(),p?($("#input_01_4-10_4_group").addClass("show"),$(`#${d}`).css("display","block")):$(`#${d}`).val("");_="general_sample_type_check",p=(c=n.getItemData(_)).applyMainCheckValueInCheckBoxReadOnly("general_sample_type_check-main_check"),d="general_sample_type_input";n.getItemData(d).applyTextValueReadOnly(),p?($("#input_01_4-10_7_group").addClass("show"),$(`#${d}`).css("display","block")):$(`#${d}`).val("");_="general_anonymity_check",p=(c=n.getItemData(_)).applyMainCheckValueInCheckBoxReadOnly("general_anonymity_check-main_check"),d="general_anonymity_input";n.getItemData(d).applyTextValueReadOnly(),p?($("#input_01_4-11_4_group").addClass("show"),$(`#${d}`).css("display","block")):$(`#${d}`).val("");_="general_bdoy_store_flag";null!=(c=n.getItemData(_))&&c.makeHtmlRadioTypeReadOnly();_="general_genetic_store_flag";null!=(c=n.getItemData(_))&&c.makeHtmlRadioTypeReadOnly(),$(".card").removeClass("hidden")}loadApplicationParams(),g_AppItemParser=new ItemParser(g_AppInfo.appSeq),g_AppItemParser.load({"filter.query_items":"irb_all"},n),$(".reset_review_type").change((function(){e()})),$("#general_experiment").on("click",(function(){a()})),$("#investgate").on("click",(function(){t()}))}));