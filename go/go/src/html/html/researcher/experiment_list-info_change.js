var changeInfoTemplate,changeMemberTemplate,changeEndDateTemplate;"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>"),"undefined"==typeof ipsap_item_module_js&&document.write("<script src='/assets/js/ipsap/ipsap_item_module.js'><\/script>"),document.write("<script src='/html/researcher/application_new-0.js'><\/script>");const animal_is_seq=104,member_is_seq=111,end_date_is_seq=112;function originalJSFunction(){}function dataMappingFunc(e){var a=e.getItemData("ca_regular_item");0==Object.keys(a.dataObj.saved_data.data).length&&$("#fast_hide_area").remove();var t=e.getParentItemData("general_title");$("#name_ko").text(t.getStringValue("name_ko")),$("#name_en").text(t.getStringValue("name_en"));t=e.getParentItemData("application_info");var n=Number(t.getStringValue("approved_dttm"));$("#approved_dttm").text(getDttm(n).dt);{let a=(t=e.getItemData("application_info")).getStringValue("application_no");""!=a&&($(".register_num").text(a),$(".register_num2").text(a))}t=e.getParentItemData("general_end_date");function r(e,a){for(let t=0;t<e.length;++t)if(e[t].is_seq==a)return e[t].contents;return"Error!!"}function d(e,a){for(let t=0;t<e.length;++t)if(e[t].file_idx==a)return e[t]}$("#general_end_date").text(t.getStringValue("0"));{var i=e.getItemData("ca_regular_file");let a=(t=e.getItemData("ca_regular_item")).dataObj.saved_data.data;for(const[e,n]of Object.entries(a)){let a=d(i.dataObj.saved_data.data,Number(e)),l=changeInfoTemplate.clone();l.find("span").eq(0).text("[정규]"),l.find("span").eq(1).text(r(t.dataObj.codes,Number(e)));var p,s=JSON.parse(n);104==Number(e)?(p=l.find(".data").eq(1).children("div").first().clone(),l.find(".data").eq(1).empty()):l.find(".data").eq(1).text(s[1]),l.find(".data").eq(2).text(s[2]),l.find("span").eq(2).text(IPSAP.APP_MAIN_TAG_NAME[s[0]]);var c=`newWindowPopup('./_popup_application-info.html#form_${s[0]}')`;if(l.find("a").first().attr("onclick",c),null==a?l.find(".data").eq(3).text(""):(l.find(".data").eq(3).text(a.org_file_name),l.find(".data").eq(3).attr("href",a.src)),104==Number(e)){var o=JSON.parse(s[1]);for(let e=0;e<o.length;++e){let a=p.clone();a.find("span").eq(0).text(o[e][0]),a.find("span").eq(3).text(o[e][1]),a.find("span").eq(5).text(o[e][2]),a.find("span").eq(6).text(o[e][3]),a.find("span").eq(9).text(o[e][4]),a.find("span").eq(11).text(o[e][5]),l.find(".data").eq(1).append(a)}}$("#change_application").append(l)}}{i=e.getItemData("ca_fast_file");let a=(t=e.getItemData("ca_fast_item")).dataObj.saved_data.data;for(const[n,p]of Object.entries(a)){let a=d(i.dataObj.saved_data.data,Number(n));s=JSON.parse(p);let o={};var l=3;if(111==Number(n)){o=changeMemberTemplate.clone(),o.find(".data").eq(2).text(s[2]);var _=o.find(".data").find("tbody").eq(0),f=o.find(".data").find("tbody").eq(1),h=_.children("tr").eq(0),m=f.children("tr").eq(0);o.find(".data").find("tbody").empty();let a=CONST.API.APPLICATION_CHANGE.BEFORECHANGE_MEMBER,t=s[1];API.load({url:a.replace("${app_seq}",t),type:CONST.API_TYPE.GET,success:function(e){var a=[];for(let t=0;t<e.length;t++)a.push(e[t]);$.each(a,(function(e,a){var t=h.clone(),n=a.info;n.tmp_phoneno=n.phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3"),1==a.user_seq?t.children("td").eq(0).find("input").prop("checked",!0):(t.children("td").eq(0).find("input").prop("checked",!1),t.children("td").eq(0).find("input").prop("disabled",!0)),1==a.animal_mng_flag?t.children("td").eq(1).find("input").prop("checked",!0):(t.children("td").eq(1).find("input").prop("checked",!1),t.children("td").eq(1).find("input").prop("disabled",!0)),t.children("td").eq(2).text(n.name),t.children("td").eq(3).text(n.dept_str),t.children("td").eq(4).text(n.position_str),t.children("td").eq(5).text(n.major_field_str),t.children("td").eq(6).text(n.tmp_phoneno),t.children("td").eq(7).text(a.exp_year_code_str),_.append(t)}))},error:function(){},complete:function(){}});var g=[],I=e.getItemData("general_director");g.push(I.dataObj.saved_data.data[0]);for(var q=I.dataObj.saved_data.data[0].user_seq,u=e.getItemData("general_expt"),P=0;P<Object.keys(u.dataObj.saved_data.data).length;P++)g.push(u.dataObj.saved_data.data[P]);$.each(g,(function(e,a){var t=m.clone(),n=a.info;n.tmp_phoneno=n.phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3"),q==a.user_seq?t.children("td").eq(0).find("input").prop("checked",!0):(t.children("td").eq(0).find("input").prop("checked",!1),t.children("td").eq(0).find("input").prop("disabled",!0)),1==a.animal_mng_flag?t.children("td").eq(1).find("input").prop("checked",!0):(t.children("td").eq(1).find("input").prop("checked",!1),t.children("td").eq(1).find("input").prop("disabled",!0)),t.children("td").eq(2).text(n.name),t.children("td").eq(3).text(n.dept_str),t.children("td").eq(4).text(n.position_str),t.children("td").eq(5).text(n.major_field_str),t.children("td").eq(6).text(n.tmp_phoneno),t.children("td").eq(7).text(a.exp_year_code_str),f.append(t)}))}else if(112==Number(n)){var A;o=changeEndDateTemplate.clone();let a=CONST.API.APPLICATION_CHANGE.BEFORECHANGE_ENDDATE,t=s[1];API.load({url:a.replace("${app_seq}",t),type:CONST.API_TYPE.GET,success:function(a){var t=e.getParentItemData("application_info");let n=getTimeStrFromDateType(new Date(getDttm(Number(t.getStringValue("approved_dttm"))).dt));A=getTimeStrFromDateType(new Date(a[0][0]));var r=e.getItemData("general_end_date"),d=getTimeStrFromDateType(new Date(r.getStringValue("0")));o.find(".data").eq(2).text(n+"~"+A),o.find(".data").eq(3).text(n+"~"+d),o.find(".data").eq(4).text(s[2])},error:function(){},complete:function(){}}),l=5}else o=changeInfoTemplate.clone(),o.removeClass("regular_review"),o.addClass("simple_review"),o.find(".blue_deep").addClass("green"),o.find(".blue_deep").removeClass("blue_deep"),o.find("span").eq(0).text("[신속]"),o.find("span").eq(1).text(r(t.dataObj.codes,Number(n))),o.find(".data").eq(1).text(s[1]),o.find(".data").eq(2).text(s[2]),o.find("span").eq(2).text(IPSAP.APP_MAIN_TAG_NAME[s[0]]);null==a?o.find(".data").eq(l).text(""):(o.find(".data").eq(l).text(a.org_file_name),o.find(".data").eq(l).attr("href",a.src));c=`newWindowPopup('./_popup_application-info.html#form_${s[0]}')`;o.find("a").first().attr("onclick",c),$("#change_application").append(o)}}switch($(".agree_date").eq(0).text(getDate(g_AppInfo.appObj.submit_dttm)),$(".reviewer").eq(0).text(spaceAddStr(g_AppInfo.appObj.user_name)),$(".task_title_ko").text(g_AppInfo.appObj.name_ko),$(".task_director_all").text(`(연구 책임자 : ${g_AppInfo.appObj.user_name})`),parseInt(g_AppInfo.appObj.application_result)){case IPSAP.APPLICATION_RESULT.SUPPLEMENT:$(".apptype_date").text("보완중"),$(".card-footer").children().eq(0).css("display","block"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.CHECKING:case IPSAP.APPLICATION_RESULT.CHECKING_2:$(".apptype_date").text("검토중"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.JUDGE_ING:case IPSAP.APPLICATION_RESULT.JUDGE_ING_2:$(".apptype_date").text("심사중"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.DECISION_ING:$(".apptype_date").text("심의중"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.REJECT:$(".apptype_area").addClass("denied"),$(".apptype_date").text("반려"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.REQUIRE_RETRY:$(".apptype_area").addClass("denied"),$(".apptype_date").text("보완후 재심"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.EXPERIMENT_ING_A:$(".apptype_date").text("실험중 (승인)"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.EXPERIMENT_ING_AC:$(".apptype_date").text("실험중 (조건부 승인)"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.EXPERIMENT_FINISH:$(".apptype_date").text("실험 만료"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.TASK_FINISH:$(".apptype_date").text("실험 종료"),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.ACCEPT:$(".apptype_date").text("승인 : "+getDttm(g_AppInfo.appObj.approved_dttm).dt),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;case IPSAP.APPLICATION_RESULT.ACCEPT_AC:$(".apptype_date").text("조건부 승인 : "+getDttm(g_AppInfo.appObj.approved_dttm).dt),$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none");break;default:$(".card-footer").children().eq(0).css("display","none"),$(".card-footer").children().eq(1).css("display","none")}switch(parseInt(g_AppInfo.appObj.application_step)){case 0:default:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(0).addClass("active");break;case 1:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(1).addClass("active");break;case 2:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(2).addClass("active");break;case 3:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(3).addClass("active");break;case 4:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(4).addClass("active");break;case 5:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(5).addClass("active")}originalJSFunction()}$((function(){if(loadApplicationParams(),IPSAP.DEMO_MODE)originalJSFunction(),$("#change_application").removeClass("hidden");else{let e={"filter.query_items":"change_application,judge_expert_deadline,application_info,general_end_date","filter.parent_items":"general_title,general_end_date,application_info,general_director,general_expt"};changeInfoTemplate=$("#change_application").children("ul").first().clone(),changeMemberTemplate=$("#change_application").children("ul").eq(2).clone(),changeEndDateTemplate=$("#change_application").children("ul").eq(3).clone(),$("#change_application").empty().removeClass("hidden"),g_AppItemParser=new ItemParser(g_AppInfo.childAppSeq),g_AppItemParser.load(e,dataMappingFunc)}}));