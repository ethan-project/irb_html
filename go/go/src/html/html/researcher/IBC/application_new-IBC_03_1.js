"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>"),document.write("<script src='/html/researcher/IBC/common_application_new-IBC.js'><\/script>");const g_page_item_name="ibc_risk_pathogen";var g_template,g_inserted_data_cnt=0;function savedDataMapping(e){var t={},i=!1;$(".ibc_risk_pathogen").children("div").each((function(e,a){var n=$("#ibc_risk_pathogen_check-main_check").is(":checked");let c=$(a).children("div").eq(1);if(n)return void(i=!0);let d={v:1,d:{1:c.find("input:text:first").val(),2:c.find("input:text").eq(1).val(),3:[c.find("input:checkbox").eq(0).is(":checked")?"1":"0",c.find("input:checkbox").eq(1).is(":checked")?"1":"0",c.find("input:checkbox").eq(2).is(":checked")?"1":"0",c.find("input:checkbox").eq(3).is(":checked")?"1":"0"],4:[c.find("input:checkbox").eq(4).is(":checked")?"1":"0",c.find("input:checkbox").eq(5).is(":checked")?"1":"0",c.find("input:checkbox").eq(6).is(":checked")?"1":"0",c.find("input:checkbox").eq(7).is(":checked")?"1":"0"],5:c.find("input:radio:checked").eq(0).val(),6:c.find("input:text").eq(2).val(),7:c.find("input:text").eq(3).val(),8:c.find("input:text").eq(4).val(),9:{R:c.find("input:radio:checked").eq(1).val(),T1:c.find("input:text").eq(5).val(),T2:c.find("input:text").eq(6).val()},10:{R:c.find("input:radio:checked").eq(2).val(),T1:c.find("input:text").eq(7).val()},11:c.find("textarea").eq(0).val(),12:c.find("textarea").eq(1).val(),13:c.find("input:checkbox").eq(8).is(":checked")?"1":"0",14:[c.find("input:checkbox").eq(9).is(":checked")?"1":"0",c.find("input:checkbox").eq(10).is(":checked")?"1":"0",c.find("input:checkbox").eq(11).is(":checked")?"1":"0",c.find("input:checkbox").eq(12).is(":checked")?"1":"0"],15:c.find("input:checkbox").eq(13).is(":checked")?"1":"0",16:[c.find("input:checkbox").eq(14).is(":checked")?"1":"0",c.find("input:checkbox").eq(15).is(":checked")?"1":"0",c.find("input:checkbox").eq(16).is(":checked")?"1":"0"]}};t[String(e)]=JSON.stringify(d),e++})),g_AppItemParser.targetSavedItemNames=[g_page_item_name,"ibc_risk_pathogen_check"],g_AppItemParser.addMoreSaveTag(g_page_item_name,{data:t}),i=!isInArray([],"1"),"prePage"==e&&1==i?appNaviPrePage():"nextPage"==e&&1==i?appNaviNextPage():"tempSave"==e&&1==i&&saveTemporary()}function insertNewData(e){g_inserted_data_cnt++;var t,i=g_template.html().replaceAll("03-1-A",`03-1-A-${g_inserted_data_cnt}`),a=$(i);if(""!=e&&1==(t=JSON.parse(e)).v){let e=a.children("div").eq(1);e.find("input:text:first").val(t.d[1]),e.find("input:text").eq(1).val(t.d[2]);for(let i=0;i<4;i++)try{t.d[3][i]>0&&e.find("input:checkbox").eq(i).prop("checked",!0)}catch(e){}for(let i=0;i<4;i++)try{t.d[4][i]>0&&e.find("input:checkbox").eq(4+i).prop("checked",!0)}catch(e){}e.find(`input:radio[name='radio_03-1-A-${g_inserted_data_cnt}_5']:radio[value='${t.d[5]}']`).prop("checked",!0),e.find("input:text").eq(2).val(t.d[6]),e.find("input:text").eq(3).val(t.d[7]),e.find("input:text").eq(4).val(t.d[8]),e.find(`input:radio[name='radio_03-1-A-${g_inserted_data_cnt}_9']:radio[value='${t.d[9].R}']`).prop("checked",!0),e.find("input:text").eq(5).val(t.d[9].T1),e.find("input:text").eq(6).val(t.d[9].T2),e.find(`input:radio[name='radio_03-1-A-${g_inserted_data_cnt}_10']:radio[value='${t.d[10].R}']`).prop("checked",!0),e.find("input:text").eq(7).val(t.d[10].T1),e.find("textarea").eq(0).val(t.d[11]),e.find("textarea").eq(1).val(t.d[12]),t.d[13]>0&&e.find("input:checkbox").eq(8).prop("checked",!0);for(let i=0;i<4;i++)try{t.d[14][i]>0&&e.find("input:checkbox").eq(9+i).prop("checked",!0)}catch(e){}t.d[15]>0&&e.find("input:checkbox").eq(13).prop("checked",!0);for(let i=0;i<3;i++)try{t.d[16][i]>0&&e.find("input:checkbox").eq(14+i).prop("checked",!0)}catch(e){}}($(".ibc_risk_pathogen").append(a),""!=e)&&(1==(t=JSON.parse(e)).v&&(1==t.d[9].R&&$(`#radio_03-1-A-${g_inserted_data_cnt}_9-1`).siblings().addClass("show"),4==t.d[9].R&&$(`#radio_03-1-A-${g_inserted_data_cnt}_9-4`).siblings().addClass("show"),1!=t.d[9].R&&$(`#radio_03-1-A-${g_inserted_data_cnt}_9-1`).siblings().removeClass("show"),3==t.d[10].R&&$(`#radio_03-1-A-${g_inserted_data_cnt}_10-3`).siblings().addClass("show"),t.d[13]>0&&($(`#input_03-1-A-${g_inserted_data_cnt}_13_group`).removeClass("show"),$(`#input_03-1-A-${g_inserted_data_cnt}_13_group`).addClass("collapse")),t.d[15]>0&&($(`#input_03-1-A-${g_inserted_data_cnt}_14_group`).removeClass("show"),$(`#input_03-1-A-${g_inserted_data_cnt}_14_group`).addClass("collapse"))));a.find(".item_remove_btn").on({click:function(e){$(this).closest(".content_wrapper").remove()}}),collapseFun(),setTriggerRadioOnChange()}function dataMappingFunc(e){e.getItemData("ibc_risk_pathogen_check").applyMainCheckValueInCheckBox("ibc_risk_pathogen_check-main_check")&&$("#main-3-1-A").removeClass("show");var t=e.getItemData(g_page_item_name).dataObj.saved_data.data;for(const[e,i]of Object.entries(t))insertNewData(i);0==g_inserted_data_cnt&&insertNewData(""),$("#main-3-1-A").removeClass("hidden"),$(".card").removeClass("hidden")}$(document).ready((function(){$(".content_wrapper").wrap('<span class="ibc_risk_pathogen"></span>'),g_template=$(".ibc_risk_pathogen").clone(),$(".ibc_risk_pathogen").empty(),$(".item_new_btn").on({click:function(e){insertNewData("")}}),loadApplicationParams(),function(){let e={"filter.query_items":"ibc_risk_pathogen,ibc_risk_pathogen_check"};g_AppItemParser=new ItemParser(g_AppInfo.appSeq),g_AppItemParser.load(e,dataMappingFunc)}();var e=function(e,t){this.phase="page3_1",this.btn_type=t};e.prototype.check=function(){"prePage"==this.btn_type||this.btn_type,savedDataMapping(this.btn_type)},di.autowired(!1).register("validator_prePage").as(e).withConstructor().withProperties().prop("btn_type").val("prePage").register("validator_nextPage").as(e).withConstructor().withProperties().prop("btn_type").val("nextPage").register("validator_tempSave").as(e).withConstructor().withProperties().prop("btn_type").val("tempSave")}));