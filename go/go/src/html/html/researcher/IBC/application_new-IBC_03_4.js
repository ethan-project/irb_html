"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>"),document.write("<script src='/html/researcher/IBC/common_application_new-IBC.js'><\/script>");const g_page_item_name="ibc_risk_toxin_handling";var g_template,g_inserted_data_cnt=0;function savedDataMapping(e){var t={},a=!1;$(`.${g_page_item_name}`).children("div").each((function(e,i){var n=$("#ibc_risk_toxin_handling_check-main_check").is(":checked");let r=$(i).children("div").eq(1);if(n)return void(a=!0);let d={v:1,d:{1:r.find("input:text").eq(0).val(),2:r.find("input:text").eq(1).val(),3:r.find("input:text").eq(2).val(),4:r.find("input:text").eq(3).val(),5:{R:r.find("input:radio:checked").eq(0).val(),T1:r.find("input:text").eq(4).val(),T2:r.find("input:text").eq(5).val()},6:{R:r.find("input:radio:checked").eq(1).val(),T1:r.find("input:text").eq(6).val()},7:r.find("textarea").eq(0).val(),8:r.find("textarea").eq(1).val(),9:r.find("input:checkbox").eq(0).is(":checked")?"1":"0",10:[r.find("input:checkbox").eq(1).is(":checked")?"1":"0",r.find("input:checkbox").eq(2).is(":checked")?"1":"0",r.find("input:checkbox").eq(3).is(":checked")?"1":"0"]}};t[String(e)]=JSON.stringify(d),e++})),g_AppItemParser.targetSavedItemNames=[g_page_item_name,"ibc_risk_toxin_handling_check"],g_AppItemParser.addMoreSaveTag(g_page_item_name,{data:t}),a=!isInArray([],"1"),"prePage"==e&&1==a?appNaviPrePage():"nextPage"==e&&1==a?appNaviNextPage():"tempSave"==e&&1==a&&saveTemporary()}function insertNewData(e){g_inserted_data_cnt++;var t=g_template.html().replaceAll("03-1-D",`03-1-D-${g_inserted_data_cnt}`);t.replaceAll("input_03-1-D",`input_03-1-D-${g_inserted_data_cnt}`);var a,i=$(t);if(""!=e&&1==(a=JSON.parse(e)).v){let e=i.children("div").eq(1);e.find("input:text").eq(0).val(a.d[1]),e.find("input:text").eq(1).val(a.d[2]),e.find("input:text").eq(2).val(a.d[3]),e.find("input:text").eq(3).val(a.d[4]),e.find(`input:radio[name='radio_03-1-D-${g_inserted_data_cnt}_5']:radio[value='${a.d[5].R}']`).prop("checked",!0),e.find("input:text").eq(4).val(a.d[5].T1),e.find("input:text").eq(5).val(a.d[5].T2),e.find(`input:radio[name='radio_03-1-D-${g_inserted_data_cnt}_6']:radio[value='${a.d[6].R}']`).prop("checked",!0),e.find("input:text").eq(6).val(a.d[6].T1),e.find("textarea").eq(0).val(a.d[7]),e.find("textarea").eq(1).val(a.d[8]),a.d[9]>0&&e.find("input:checkbox").eq(0).prop("checked",!0);for(let t=0;t<3;t++)try{a.d[10][t]>0&&e.find("input:checkbox").eq(1+t).prop("checked",!0)}catch(e){}}($(`.${g_page_item_name}`).append(i),""!=e)&&(1==(a=JSON.parse(e)).v&&(4==a.d[5].R&&$(`#radio_03-1-D-${g_inserted_data_cnt}_5-4`).siblings().addClass("show"),1!=a.d[5].R&&$(`#radio_03-1-D-${g_inserted_data_cnt}_5-1`).siblings().removeClass("show"),3==a.d[6].R&&$(`#radio_03-1-D-${g_inserted_data_cnt}_6-3`).siblings().addClass("show"),a.d[9]>0&&($(`#input_03-1-D-${g_inserted_data_cnt}_9_group`).removeClass("show"),$(`#input_03-1-D-${g_inserted_data_cnt}_9_group`).addClass("collapse"))));i.find(".item_remove_btn").on({click:function(e){$(this).closest(".content_wrapper").remove()}}),collapseFun(),setTriggerCheckBoxOnChange(),setTriggerRadioOnChange()}function dataMappingFunc(e){e.getItemData("ibc_risk_toxin_handling_check").applyMainCheckValueInCheckBox("ibc_risk_toxin_handling_check-main_check")&&$("#main-3-1-D").removeClass("show");var t=e.getItemData(g_page_item_name).dataObj.saved_data.data;for(const[e,a]of Object.entries(t))insertNewData(a);0==g_inserted_data_cnt&&insertNewData(""),$("#main-3-1-D").removeClass("hidden"),$(".card").removeClass("hidden")}$(document).ready((function(){$(".content_wrapper").wrap(`<span class="${g_page_item_name}"></span>`),g_template=$(`.${g_page_item_name}`).clone(),$(`.${g_page_item_name}`).empty(),$(".item_new_btn").on({click:function(e){insertNewData("")}}),loadApplicationParams(),function(){let e={"filter.query_items":g_page_item_name+",ibc_risk_toxin_handling_check"};g_AppItemParser=new ItemParser(g_AppInfo.appSeq),g_AppItemParser.load(e,dataMappingFunc)}();var e=function(e,t){this.phase="page3_4",this.btn_type=t};e.prototype.check=function(){"prePage"==this.btn_type||this.btn_type,savedDataMapping(this.btn_type)},di.autowired(!1).register("validator_prePage").as(e).withConstructor().withProperties().prop("btn_type").val("prePage").register("validator_nextPage").as(e).withConstructor().withProperties().prop("btn_type").val("nextPage").register("validator_tempSave").as(e).withConstructor().withProperties().prop("btn_type").val("tempSave")}));