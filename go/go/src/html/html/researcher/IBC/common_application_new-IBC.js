"undefined"==typeof ipsap_item_module_js&&document.write("<script src='/assets/js/ipsap/ipsap_item_module.js'><\/script>"),"undefined"==typeof ipsap_application_common_js&&document.write("<script src='/assets/js/ipsap/ipsap_application_common.js'><\/script>"),"undefined"==typeof date_utils_js&&document.write("<script src='/assets/js/common/util/date_utils.js'><\/script>");var g_global_mapping=!0;function loadApplicationParams(){IPSAP.DEMO_MODE||g_AppInfo.loadParams()}function ibcResetLeftNavi(e){let a=$(".card.IBC");var p="",t=Math.min.apply(null,e);a.removeClass("IBC_initial"),p=t<4?"IBC_nat_approval":t>=4&&t<9?"IBC_ins_approval":t>=9&&t<11?"IBC_ins_report":"IBC_exemption",a.addClass(p)}function expTypeCheck(){$("input[type=checkbox][data-exp-type]").filter(((e,a)=>!$(a).prop("disabled"))).on({change:e=>{let a=$(e.currentTarget),p=a.data("exp-type"),t=$(".card.IBC");void 0!==p&&(a.prop("checked")?(t.removeClass("IBC_initial"),t.addClass(p)):($("input[type=checkbox][data-exp-type="+p+"]:checked").length||t.removeClass(p),$("input[data-exp-type]:checked").length||t.addClass("IBC_initial")))}})}function initApplicationPageNaviBtn(){var e=getPageIdx(g_AppInfo.PageID);e<0||(0==e?($("#app_page_navi_pre_btn").switchClass("btn-outline-warning","btn-outline-secondary"),$("#app_page_navi_pre_btn").removeClass("tippy-btn"),$("#app_page_navi_pre_btn").removeAttr("title data-tippy-animation data-tippy-arrow"),$("#app_page_navi_pre_btn").children("i").removeClass("fa-arrow-left"),0==g_AppInfo.appSeq&&$("#tmp_app_delete_btn").css("display","none")):e==APP_IBC_NAVIGATION.IBC.PAGE_INFO.length-1&&($("#app_page_navi_pre_btn").css("display","none"),$("#app_page_navi_next_btn").css("display","none")))}function makeLeftStepNavi(){for(var e=window.location.pathname,a=e.substr(e.indexOf("-")+1).replace(".html","").split("_"),p=Number(a[1])-1,t=Number(a[2]),_="",n=0;n<APP_IBC_NAVIGATION.IBC.STEP_CNT;++n){var i=`PAGE_${n+1}_1`,s=`row process_content ${"sub_"+String(APP_IBC_NAVIGATION.IBC.STEP_INFO[n].DOT)}`;p==n&&(s+=` active active_sub_${t}`),_+=`<a href="javascript:void(0);" onclick="APP_IBC_NAVIGATION.navigate('${i}');" class="${s}" data-process-num="${n+1}">\n      <span>${APP_IBC_NAVIGATION.IBC.STEP_INFO[n].TITLE}</span>\n      <div class="sub_processes"><div class="sub_process p1"></div><div class="sub_process p2"></div><div class="sub_process p3"></div><div class="sub_process p4"></div><div class="sub_process p5"></div></div>\n    </a>`}$("#application_left_step_navi").html(_)}function validCheckAfterClickPrePage(){di.resolve("validator_prePage").check()}function validCheckAfterClickNextPage(){di.resolve("validator_nextPage").check()}function validCheckAfterClickTempSave(){di.resolve("validator_tempSave").check()}function validCheckAndJumpPage(){di.resolve("validator_jumpPage").check()}function getPageIdx(e){for(var a=0;a<APP_IBC_NAVIGATION.IBC.PAGE_INFO.length;++a)if(APP_IBC_NAVIGATION.IBC.PAGE_INFO[a].PAGE_ID==e)return a;return-1}function appNaviPrePage(){var e=getPageIdx(g_AppInfo.PageID);e<=0||appItemSaveTemporary(appNavigationCallback,{PAGE_ID:APP_IBC_NAVIGATION.IBC.PAGE_INFO[e-1].PAGE_ID})}function appNaviNextPage(){var e=getPageIdx(g_AppInfo.PageID);e<0||e>=APP_IBC_NAVIGATION.IBC.PAGE_INFO.length-1||appItemSaveTemporary(appNavigationCallback,{PAGE_ID:APP_IBC_NAVIGATION.IBC.PAGE_INFO[e+1].PAGE_ID})}function saveTemporary(){appItemSaveTemporary(appNavigationCallback)}function appNavigationCallback(e,a,p){var t=getPageIdx(g_AppInfo.PageID);if(e)null!=a.new_info&&(g_AppInfo.appSeq=a.new_info.application_seq,g_AppInfo.appObj=a.new_info,alert("접수번호가 부여되었습니다."));else{if(null==a.obj)return void alert(a.msg);if(null!=a.obj)return a.obj.focus(),void alert(a.msg)}null==p?e?($("#modal_tempSave").modal("show"),$("#btn_keep").on("click",(function(){0==t&&APP_IBC_NAVIGATION.navigate("PAGE_1_1")}))):alert(`임시저장을 실패했습니다.\n(${a.em})`):(e||alert(`임시저장을 실패했습니다.\n(${a.em})`),APP_IBC_NAVIGATION.navigate(p.PAGE_ID))}function checkValidPageID(e){for(var a=0;a<APP_IBC_NAVIGATION.IBC.PAGE_INFO.length;++a)if(APP_IBC_NAVIGATION.IBC.PAGE_INFO[a].PAGE_ID==e&&APP_IBC_NAVIGATION.IBC.PAGE_INFO[a].URL==$(location).attr("pathname"))return!0;return!1}function tempSaveAppDelete(){var e=CONST.API.APPLICATION.DELETE,a=g_AppInfo.appObj.application_seq;API.load({url:e.replace("${app_seq}",a),type:CONST.API_TYPE.DELETE,success:function(e){},error:function(e){},complete:function(){location.replace("../application_list.html")}})}$((function(){if(expTypeCheck(),initApplicationPageNaviBtn(),makeLeftStepNavi(),0==g_AppInfo.appSeq)$(".register_num").text("임시저장 후 발급"),$(".apptype_date").text("미승인"),$(".task_director_all").text("");else{var e="";switch(parseInt(g_AppInfo.appObj.application_type)){case IPSAP.APPLICATION_TYPE.NEW:e="신규 심의";break;case IPSAP.APPLICATION_TYPE.CHANGE:e="변경 심의"}if(""!=e&&g_global_mapping){$(".apptype_title").text(e),$(".register_num").text(g_AppInfo.appObj.application_no),$(".register_num2").text(g_AppInfo.appObj.application_no),$(".register_num_children").text(g_AppInfo.appObj.application_no),$(".task_title").text(g_AppInfo.appObj.name_ko+"/"+g_AppInfo.appObj.name_en),$(".task_title_ko").text(g_AppInfo.appObj.name_ko),$(".task_title_en").text(g_AppInfo.appObj.name_en),$(".task_sub_title").text(g_AppInfo.appObj.sub_title),$(".task_director").text(g_AppInfo.appObj.user_name),$(".task_director_all").text(`(연구 책임자 : ${g_AppInfo.appObj.user_name})`),$(".task_director_dept").text(g_AppInfo.appObj.user_dept_str),g_AppInfo.appObj.user_phoneno&&(g_AppInfo.appObj.tmp_user_phoneno=g_AppInfo.appObj.user_phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3")),$(".task_director_contact").text(g_AppInfo.appObj.tmp_user_phoneno+" / "+g_AppInfo.appObj.user_email),0==g_AppInfo.appObj.approved_dttm?($(".task_approved_date").text("승인일"),$(".apptype_date").text("미승인"),9!=g_AppInfo.appObj.application_result&&10!=g_AppInfo.appObj.application_result||($(".apptype_date").text(g_AppInfo.appObj.application_result_str),$(".apptype_area").addClass("denied"))):($(".task_approved_date").text(getDttm(g_AppInfo.appObj.approved_dttm).dt),$(".apptype_date").text("승인:"+getDttm(g_AppInfo.appObj.approved_dttm).dt));var a="";switch(g_AppInfo.appObj.judge_type_str){case"IBC":a='<img src="/assets/images/common/IBC_icon_top.png">';break;case"IRB":a='<img src="/assets/images/common/IRB_icon_top.png">';break;default:a='<img src="/assets/images/common/IACUC_icon_top.png">'}switch($(".card_desc.judge_type_str").html(a+g_AppInfo.appObj.judge_type_str),$(".app_summary>.judge_type_str").html(g_AppInfo.appObj.judge_type_str),parseInt(g_AppInfo.appObj.application_step)){case 0:default:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(0).addClass("active");break;case 1:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(1).addClass("active");break;case 2:case 3:case 4:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(2).addClass("active");break;case 5:$(".progress_area").children().removeClass("active"),$(".progress_area").children().eq(3).addClass("active")}}}}));