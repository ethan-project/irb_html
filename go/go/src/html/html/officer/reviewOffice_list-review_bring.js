function originalJSFunction(){}function dataMappingFunc(e){var t=e.getParentItemData("general_title");$("#name_ko").text(t.getStringValue("name_ko")),$("#name_en").text(t.getStringValue("name_en"));var a="additional_reporting";t=e.getItemData(a);$(`#${a}`).text(t.applyTextValueReadOnly());{t=e.getParentItemData("application_info");let g=Number(t.getStringValue("approved_dttm"));$("#approved_dttm").text(getDttm(g).dt)}t=e.getParentItemData("general_end_date");$("#general_end_date").text(t.getStringValue("0"));{var n=e.getParentItemData("animal_type"),i=e.getParentItemData("animal_type_final"),r=e.getParentItemData("animal_type_bring"),l=e.getParentItemData("animal_sum").dataObj.saved_data.data;0==(c=i.dataObj.saved_data.data).length&&(c=n.dataObj.saved_data.data);let u=r.dataObj.saved_data.data;if(u.length>0){function p(e){for(let t=0;t<c.length;++t)if(c[t].animal_code_str==e)return!0;return!1}for(let h=0;h<u.length;++h)p(u[h].animal_code_str)||c.push(u[h])}function d(e){var t=0,a=0;for(let n=0;n<u.length;++n)u[n].animal_code_str==e&&(t+=parseInt(u[n].male_cnt),a+=parseInt(u[n].female_cnt));return{m:t,f:a}}var s=$(".list_table").eq(0).children("tbody"),_=s.children("tr").first().clone();s.empty().removeClass("hidden");for(let I=0;I<l.length;++I){let P=d(l[I].animal_code_str);(f=_.clone()).children("td").eq(0).text(l[I].animal_code_str),f.children("td").eq(1).text(l[I].male_cnt),f.children("td").eq(2).text(l[I].female_cnt),f.children("td").eq(3).text(parseInt(l[I].male_cnt)+parseInt(l[I].female_cnt)),f.children("td").eq(4).text(P.m),f.children("td").eq(5).text(P.f),f.children("td").eq(6).text(P.m+P.f),f.children("td").eq(7).text(l[I].male_cnt-P.m),f.children("td").eq(8).text(l[I].female_cnt-P.f),f.children("td").eq(9).text(parseInt(l[I].male_cnt)+parseInt(l[I].female_cnt)-P.m-P.f),s.append(f)}}var c=(r=e.getItemData("animal_type_bring")).dataObj.saved_data.data,o=$("#bring_table").children("tbody"),m=o.children("tr").first().clone();o.empty().removeClass("hidden");for(let q=0;q<c.length;++q){var f;(f=m.clone()).children("td").eq(0).text(c[q].animal_code_str),f.children("td").eq(1).children("span").text(c[q].male_cnt),f.children("td").eq(2).children("span").text(c[q].female_cnt),f.children("td").eq(3).children("span").text(parseInt(c[q].male_cnt)+parseInt(c[q].female_cnt)),f.children("td").eq(4).children("span").text(c[q].supplier_type_str),f.children("td").eq(5).children("span").text(c[q].supplier_name),f.children("td").eq(6).children("span").text(c[q].genetic_type),o.append(f)}$(".agree_date").text(getDate(g_AppInfo.appObj.submit_dttm)),$(".reviewer").text(spaceAddStr(g_AppInfo.appObj.user_name)),originalJSFunction(),$("#app_supplement_general_title").on({change:function(e){resetButton()}}),$("#app_supplement").children("textarea").on({keyup:function(e){resetButton()}}),resetButton()}function resetButton(){$("#btn_request").addClass("disabled"),$("#btn_finish_review").addClass("disabled"),$("#app_supplement_general_title").is(":checked")?($("#app_supplement_general_title").parent().addClass("checkbox-danger"),$('label[for="app_supplement_general_title"]').removeClass("blue_deep"),""!=$("#app_supplement").children("textarea").val()&&$("#btn_request").removeClass("disabled")):($("#app_supplement_general_title").parent().removeClass("checkbox-danger"),$('label[for="app_supplement_general_title"]').addClass("blue_deep"),$("#btn_finish_review").removeClass("disabled"))}function setAppChangeInfo(){urlPath=CONST.API.APPLICATION_CHANGE.ANIMALINFO,app_seq=g_AppItemParser.app_seq,API.load({url:urlPath.replace("${app_seq}",app_seq),type:CONST.API_TYPE.GET,success:function(e){if(!e)return;e.length>0&&$(".trace_label").removeClass("hidden");var t=$("#trace_changing").find(".changing-list").clone().clone();$("#trace_changing").empty();var a=1;let n=e;for(const[e,p]of Object.entries(n)){t.find(".list-num").text(a),a++,t.find(".list-date").text(p.approved_dttm);var i,r=JSON.parse(p.contents);i=t.find(".data").eq(1).children("div").first().clone(),t.find(".data").eq(1).empty(),t.find(".data").eq(2).text(r[2]),p.filepath?(t.find(".data").eq(3).text(p.org_file_name),t.find(".data").eq(3).attr("href",p.src)):t.find(".data").eq(3).text("");var l=JSON.parse(r[1]);for(let e=0;e<l.length;++e){let a=i.clone();a.find("span").eq(0).text(l[e][0]),a.find("span").eq(3).text(l[e][1]),a.find("span").eq(5).text(l[e][2]),a.find("span").eq(6).text(l[e][3]),a.find("span").eq(9).text(l[e][4]),a.find("span").eq(11).text(l[e][5]),t.find(".data").eq(1).append(a)}$("#trace_changing").append(t)}},error:function(){},complete:function(){}})}function onClickRequest(){if($("#app_supplement_general_title").is(":checked")){var e=$("#app_supplement").children("textarea").val();""!=e?IPSAP.DEMO_MODE?window.location.href="./reviewOffice_list.html":(g_AppItemParser.targetSavedItemNames=[],g_AppItemParser.addMoreSaveTag("br_supplement",{data:{0:e}}),appItemSubmit(onCompleteRequest,IPSAP.APP_SUBMIT_TYPE_PARAM.SUPPLEMENT)):alert("보완 요청사항을 입력하세요.")}else alert("보완 요청사항이 입력되지 않았습니다.")}function onCompleteRequest(e,t,a){e?window.location.href="./reviewOffice_list.html":appSubmitHandleError("행정 보완 요청을 실패했습니다.",t)}function onClickFastFinish(){$("#app_supplement_general_title").is(":checked")?alert("보완 요청사항이 입력되어 있습니다."):IPSAP.DEMO_MODE?window.location.href="./reviewConfirm_list.html":(g_AppItemParser.targetSavedItemNames=[],appItemSubmit(onCompleteFastFinish,IPSAP.APP_SUBMIT_TYPE_PARAM.CHECKING1_FINISH_FAST))}function onCompleteFastFinish(e,t,a){e?window.location.href="./reviewConfirm_list.html":appSubmitHandleError("행정 검토 완료 실패했습니다.",t)}"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>"),"undefined"==typeof ipsap_item_module_js&&document.write("<script src='/assets/js/ipsap/ipsap_item_module.js'><\/script>"),document.write("<script src='/html/researcher/application_new-0.js'><\/script>"),$((function(){if(loadApplicationParams(),IPSAP.DEMO_MODE)originalJSFunction(),$(".list_table tbody").removeClass("hidden");else{let e={"filter.query_items":"animal_type_bring,additional_reporting","filter.parent_items":"general_title,general_end_date,application_info,animal_type,animal_type_final,animal_type_bring,animal_sum"};g_AppItemParser=new ItemParser(g_AppInfo.childAppSeq),g_AppItemParser.load(e,dataMappingFunc)}setAppChangeInfo()}));