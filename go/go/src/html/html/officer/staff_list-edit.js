"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>");var user_seq=IPSAP.getStor("user_seq");function getInfoMember(){IPSAP.DEMO_MODE||API.load({url:eval("`"+CONST.API.USER.DETAIL+"`"),type:CONST.API_TYPE.GET,success:function(e){let t="";1==e.user_status?t="unregistered":2==e.user_status?t="registered":4==e.user_status&&(t="withdrawn",$(".btn_withdrawn_block").prop("disabled",!0)),$(".tbody1_1").find("span").eq(1).text(e.institution_name_ko),$(".tbody1_1").find("span").eq(4).text(e.institution_name_en),$(".tbody1_2").text(e.institution_code);let a=e.user_type.split(","),n=a.length;for(var s=0;s<n;s++)$('input:checkbox[name="auth"]').each((function(){a[s]==this.value&&(this.checked=!0)}));$(".tbody1_4").val(e.dept_str),$(".tbody1_5").val(e.position_str),$(".tbody1_6").val(e.major_field_str);let o=$(".status");o.text(e.user_status_str),o.addClass(t),$(".tbody2_2").val(e.name),$(".tbody2_3").val(e.phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3")),$(".tbody2_4").text(e.email),"1"==e.agree_email&&$("#agree_to_receive-email").prop("checked","checked"),"1"==e.agree_sms&&$("#agree_to_receive-sms").prop("checked","checked"),"1"==e.agree_pri_open&&$("#agree_to_open-info").prop("checked","checked"),$("#training_date").val(e.edu_date.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3")),$(".tbody3_2").val(e.edu_institution_str),$(".tbody3_3").val(e.edu_course_num)},complete:function(){JSON.parse(COMM.getCookie("user_info")).user_type[1]||$("#auth_04, #auth_05").parent().css("display","none"),userAuthCheckInit(),userAuthCheckchange()}})}function userAuthCheckInit(){$("#auth_05").is(":checked")&&$("#auth_04").prop("disabled",!0),$("#auth_04").is(":checked")&&$("#auth_05").prop("disabled",!0)}function userAuthCheckchange(){var e=$('input:checkbox[name="auth"]');$(e).on("change",(function(){e.eq(3).is(":checked")?e.eq(4).prop("disabled",!0):e.eq(4).prop("disabled",!1),e.eq(4).is(":checked")?e.eq(3).prop("disabled",!0):e.eq(3).prop("disabled",!1)}))}function initPw(){IPSAP.DEMO_MODE||API.load({url:eval("`"+CONST.API.ADMIN.PATCH_PASS+"`"),type:CONST.API_TYPE.PATCH,success:function(e){$("#modal_init_pw").modal("hide")},error:function(e){}})}function setInfoMember(){$("#btn_save").on("click",(function(){var e=new Object;$("#agree_to_receive-email").is(":checked")?e.agree_email=parseInt($("#agree_to_receive-email").val()):e.agree_email=0,$("#agree_to_open-info").is(":checked")?e.agree_pri_open=parseInt($("#agree_to_open-info").val()):e.agree_pri_open=0,$("#agree_to_receive-sms").is(":checked")?e.agree_sms=parseInt($("#agree_to_receive-sms").val()):e.agree_sms=0,e.name=$(".tbody2_2").val(),e.dept=$(".tbody1_4").val(),e.edu_course_num=$(".tbody3_3").val(),e.edu_date=$("#training_date").val().replaceAll("-",""),e.edu_institution=$(".tbody3_2").val(),e.major_field=$(".tbody1_6").val(),e.phoneno=$(".tbody2_3").val().replaceAll("-",""),e.position=$(".tbody1_5").val(),e.user_seq=user_seq;let t=[];$('input:checkbox[name="auth"]').each((function(){this.checked&&t.push(this.value)})),e.user_type=t.toString();var a=e;API.load({url:CONST.API.ADMIN.PATCH_USER,type:CONST.API_TYPE.PATCH,data:a,success:function(e){$("#modal_saved").modal("show")},error:function(e){}})}))}$((function(){$(".page-content");getInfoMember(),$("#btn_init_pw").on("click",(function(){initPw()})),setInfoMember()}));