"undefined"==typeof ipsap_common_js&&document.write("<script src='/assets/js/ipsap/ipsap_common.js'><\/script>"),"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>"),"undefined"==typeof date_utils_js&&document.write("<script src='/assets/js/common/util/date_utils.js'><\/script>");var order_seq=COMM.getStor("order_seq");function getOrderInfo(){let s=CONST.API.ORDERS.DETAIL;API.load({url:s.replace("${order_seq}",order_seq),type:CONST.API_TYPE.GET,success:function(s){if($("#membership_info").empty(),s.length>1)$.each(s,(function(t,a){$("#membership_name").text(a.pname),$("#membership_desc").text(s[0].desc_text);let n="";"CARD"==a.pay_method?n="신용카드":"BANK"==a.pay_method&&(n="계좌이체");let e="";if(e+=`<tr>\n                        <td class="info_name fw_bold">결제 금액</td>\n                        <td class="data fw_bold"><span class="approved underline">${setComma(s[0].amount)}</span><span class="subInfo mLeft5">원</span></td>\n                        <td class="info_name">결제 구분</td>\n                        <td class="data"><span class="approved fw_bold">${n} - 승인</span></td>\n                    </tr>\n                    <tr>\n                        <td class="info_name">결제 일시</td>\n                        <td class="data">${moment(s[0].pay_date,"YYYY-MM-DD hh:mm:ss").format("YYYY-MM-DD HH:mm:ss")}</td>\n                        <td class="info_name">결제 번호</td>\n                        <td class="data">${s[0].moid}</td>\n                    </tr>`,"3"==s[1].order_type){e+=`<tr class="blank_row"><td colspan="4"></td></tr>\n                            <tr>\n                            <td class="info_name fw_bold">취소 금액</td>\n                            <td class="data fw_bold"><span class="canceled underline">${setComma(s[1].amount)}</span><span class="subInfo mLeft5">원</span></td>\n                            <td class="info_name">결제 구분</td>\n                            <td class="data"><span class="canceled fw_bold">${n} - 전체 취소</span></td>\n                            </tr>\n                            <tr>\n                            <td class="info_name">취소 일시</td>\n                            <td class="data">${moment(s[1].pay_date,"YYYY-MM-DD hh:mm:ss").format("YYYY-MM-DD HH:mm:ss")}</td>\n                            <td class="info_name">결제 번호</td>\n                            <td class="data">${s[1].moid}</td>\n                            </tr>`}else if("4"==s[1].order_type){let t="";for(var d=1;d<s.length;d++)t+=`<tr class="blank_row"><td colspan="4"></td></tr>\n                            <tr>\n                            <td class="info_name fw_bold">취소 금액</td>\n                            <td class="data fw_bold"><span class="canceled underline">${setComma(s[d].amount)}</span><span class="subInfo mLeft5">원</span></td>\n                            <td class="info_name">결제 구분</td>\n                            <td class="data"><span class="canceled fw_bold">${n} - 부분 취소</span></td>\n                            </tr>\n                            <tr>\n                            <td class="info_name">취소 일시</td>\n                            <td class="data">${moment(s[d].auth_date,"YY-MM-DD hh:mm:ss").format("YYYY-MM-DD HH:mm:ss")}</td>\n                            <td class="info_name">결제 번호</td>\n                            <td class="data">${s[d].moid}</td>\n                            </tr>`;e+=t}let o=0;for(d=1;d<s.length;d++)o+=s[d].amount;e+=`<tr class="blank_row"><td colspan="4"></td></tr>\n                        <tr>\n                        <td class="info_name">최종 결제 금액</td>\n                        <td colspan="3" class="data"><span class="underline red fw_bold">${setComma(s[0].amount-o)}</span><span class="subInfo mLeft5">원</span></td>\n                        </tr>`,$("#membership_info").html(e),$("#btn_issue").attr("data-tid",`${a.tid}`)}));else{$("#membership_name").text(s[0].pname),$("#membership_desc").text(s[0].desc_text);let t="";"CARD"==s[0].pay_method?t="신용카드":"BANK"==s[0].pay_method&&(t="계좌이체"),$("#membership_info").append(`<tr>\n                    <td class="info_name fw_bold">결제 금액</td>\n                    <td class="data fw_bold"><span class="approved underline">${setComma(s[0].amount)}</span><span class="subInfo mLeft5">원</span></td>\n                    <td class="info_name">결제 구분</td>\n                    <td class="data"><span class="approved fw_bold">${t} - 승인</span></td>\n                  </tr>\n                  <tr>\n                    <td class="info_name">결제 일시</td>\n                    <td class="data">${moment(s[0].auth_date,"YY-MM-DD hh:mm:ss").format("YYYY-MM-DD HH:mm:ss")}</td>\n                    <td class="info_name">결제 번호</td>\n                    <td class="data">${s[0].moid}</td>\n                  </tr>\n                  <tr class="blank_row"><td colspan="4"></td></tr>\n                  <tr>\n                    <td class="info_name">최종 결제 금액</td>\n                    <td colspan="3" class="data"><span class="underline red fw_bold">${setComma(s[0].amount)}</span><span class="subInfo mLeft5">원</span></td>\n                  </tr>`),$("#btn_issue").attr("data-tid",`${s[0].tid}`)}},complete:function(){$(".card").removeClass("hidden")}})}function printReceipt(s){var t="https://npg.nicepay.co.kr/issue/IssueLoader.do?TID="+s+"&type=0";window.open(t,"popupIssue","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,width=420,height=540")}$(document).ready((function(){IPSAP.DEMO_MODE?$(".card").removeClass("hidden"):getOrderInfo()})),$("#btn_issue").on("click",(function(s){s.stopPropagation(),printReceipt($(this).data("tid"))}));