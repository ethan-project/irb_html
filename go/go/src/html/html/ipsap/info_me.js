"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>");var user_info=JSON.parse(COMM.getCookie(CONST.COOKIE.IPSAP_USER_INFO)),user_seq=user_info.user_seq,tmp_key=COMM.getCookie(CONST.COOKIE.IPSAP_TMP_KEY),tbody1=$(".info_table_content").eq(0).find("tbody"),tbody2=$(".info_table_content").eq(1).find("tbody"),pwdValidFlag=!1;function getInfo(){let e=CONST.API.USER.DETAIL;API.load({url:e.replace("${user_seq}",user_seq),type:CONST.API_TYPE.GET,success:function(e){tbody1.find("tr").eq(0).find(".data").text(e.name),tbody1.find("tr").eq(1).find("input:text").val(e.phoneno.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3")),tbody1.find("tr").eq(2).find(".data").text(e.email),tbody2.find("tr").eq(0).find("input").val(e.edu_date.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3")),tbody2.find("tr").eq(1).find("input:text").val(e.edu_institution_str),tbody2.find("tr").eq(2).find("input:text").val(e.edu_course_num)},complete:function(){validPwd()}})}function validPwd(){var e=$("#old_password"),t=$("#new_password"),n=$("#renew_password"),d=/[a-zA-Z]/,i=/[0-9]/,a=/[~!@\#$%<>^&*]/;$("#new_password").on("input",(function(){0==e.val().length||e.val()==t.val()||!d.test(t.val())||!i.test(t.val())||!a.test(t.val())||t.val().length<8||t.val().length>24?($("#valid1").attr("hidden",!0),$("#valid2").attr("hidden",!0),$("#invalid1").attr("hidden",!0),$("#invalid2").removeAttr("hidden")):($("#valid1").attr("hidden",!0),$("#valid2").removeAttr("hidden"),$("#invalid1").attr("hidden",!0),$("#invalid2").attr("hidden",!0),pwdValidFlag=!0)})),$("#renew_password").on("input",(function(){t.val()==n.val()&&1==pwdValidFlag?($("#valid1").removeAttr("hidden"),$("#valid2").attr("hidden",!0),$("#invalid1").attr("hidden",!0),$("#invalid2").attr("hidden",!0),$("#btn_change_pw").removeAttr("disabled")):($("#valid1").attr("hidden",!0),$("#valid2").attr("hidden",!0),$("#invalid1").attr("hidden",!0),$("#invalid2").removeAttr("hidden"),$("#btn_change_pw").attr("disabled",!0))}))}function setInfo(){var e=new Object;e.agree_email=parseInt($("#agree_to_receive-email").val()),e.agree_pri_open=parseInt($("#agree_to_open-info").val()),e.agree_sms=parseInt($("#agree_to_receive-sms").val()),e.edu_course_num=tbody2.find("tr").eq(2).find("input:text").val(),e.edu_date=tbody2.find("tr").eq(0).find("input").val().replaceAll("-",""),e.edu_institution=tbody2.find("tr").eq(1).find("input:text").val(),e.phoneno=tbody1.find("tr").eq(1).find("input:text").val().replaceAll("-","");var t=e;let n=CONST.API.USER.PATCH;API.load({url:n.replace("${user_seq}",user_seq),type:CONST.API_TYPE.PATCH,data:t,success:function(e){},error:function(e){alert("필수 정보를 입력해주세요.")},complete:function(){COMM.clearCookie(),IPSAP.clearStor("institution_list_data"),IPSAP.clearStor("user_seq"),IPSAP.clearStor("reqsvc_seq"),IPSAP.clearStor("board_seq"),IPSAP.clearStor("inst_seq"),IPSAP.clearStor("plan_seq"),IPSAP.clearStor("order_seq"),window.location.href="/index.html"}})}function IPSAPWithdraw(){let e=CONST.API.USER.WITHDRAW;API.load({url:e.replace("${user_seq}",user_seq),type:CONST.API_TYPE.DELETE,success:function(e){},error:function(e){}})}$((function(){if(!IPSAP.DEMO_MODE){$("page-content");$("#modal_change_pw").on("hidden.bs.modal",(function(){$("#modal_change_pw").find(".modal-body").find("input").val(""),$("#valid1").attr("hidden",!0),$("#valid2").attr("hidden",!0),$("#invalid1").attr("hidden",!0),$("#invalid2").attr("hidden",!0)})),$("#modal_change_pw").on("hidden",(function(){$("#modal_change_pw").find(".modal-body").find("input").val(""),$("#valid1").attr("hidden",!0),$("#valid2").attr("hidden",!0),$("#invalid1").attr("hidden",!0),$("#invalid2").attr("hidden",!0)})),$("#btn_register").on("click",(function(){setInfo()})),$("#btn_withdraw").on("click",(function(){IPSAPWithdraw()})),getInfo()}}));