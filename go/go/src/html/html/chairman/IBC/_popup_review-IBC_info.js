var g_trTemplete;"undefined"==typeof api_js&&document.write("<script src='/assets/js/common/api.js'><\/script>"),"undefined"==typeof const_js&&document.write("<script src='/assets/js/common/const.js'><\/script>"),"undefined"==typeof ipsap_item_module_js&&document.write("<script src='/assets/js/ipsap/ipsap_item_module.js'><\/script>"),document.write("<script src='/html/researcher/IBC/common_application_new-IBC.js'><\/script>");var minValue=0,user_info=JSON.parse(COMM.getCookie(CONST.COOKIE.IPSAP_USER_INFO)),inst_info=JSON.parse(COMM.getCookie(CONST.COOKIE.IPSAP_INST_INFO));function dataMappingFunc(e){var t=(r=e.getItemData("ibc_general_experiment")).getStringValue("0"),a=[];""!=t&&(a=t.split(",")),(minValue=Math.min.apply(null,a))<=8&&$("#judgement_result").removeClass("hidden");var r=e.getItemData("general_title",!0);$("#coding_title_area").children("div").eq(0).children("span").text(r.getStringValue("name_ko")),$("#coding_title_area").children("div").eq(1).children("span").text(r.getStringValue("name_en"));r=e.getItemData("general_end_date",!0);if("0"==g_AppInfo.appObj.approved_dttm?$("#coding_title_area").children("div").eq(2).children("span").text("위원회 승인일 ~ "+r.getStringValue("0")):$("#coding_title_area").children("div").eq(2).children("span").text(getDttm(g_AppInfo.appObj.approved_dttm).dt+" ~ "+r.getStringValue("0")),minValue<=8){(r=e.getItemData("expert_review_total_review")).applyTextValueReadOnly();r=e.getItemData("expert_review_result");var i=0;try{i=Number(r.dataObj.saved_data.data[0].select_ids[0])}catch(O){}var d="";try{d=r.dataObj.saved_data.data[0].inputs[String(i)][1]}catch(q){}var n="";for(let w=0;w<r.dataObj.items.length;++w)if(r.dataObj.items[w].id==i){n=r.dataObj.items[w].value;break}$("#expert_review_result_text").prev(".custom-radio").find("label").text(n),""!=d?$("#expert_review_result_text").text(d):$("#expert_review_result_text").remove();r=e.getItemData("expert_member");try{r.dataObj.saved_data.data[0].info.name}catch(S){}$("#experter").text(spaceAddStr("***"));var s=0;try{s=r.dataObj.saved_data.data[0].user_seq}catch(I){}var l=e.getItemData("expert_review_dttm"),c=new Date(1e3*l.dataObj.saved_data.data[String(s)]);$("#expert_submit_date").text(getTimeStrFromDateType(c));{var o=e.getItemData("expert_review_opinion",!0);let y=$(".list_table").first().find("tbody"),C=o.dataObj.codes;for(let D=0;D<C.length;++D){let k=g_trTemplete.clone();k.children("td").eq(0).text(C[D].contents);try{let A=o.dataObj.saved_data.data[C[D].is_seq];var _=JSON.parse(A);let N=k.children("td").eq(1);N.empty();let T="";for(let M=0;M<_.select.length;++M){let V=_.select[M],P=o.dataObj.codes[D].sub_items;for(let R=0;R<P.length;++R)if(V==P[R].is_seq){""!=T&&(T+="<br>"),T+=P[R].contents;break}}N.removeClass("noComment"),N.append(`<div class="review_numbers">${T}</div>`),N.append(`<div class="review_desc text-wrap">${_.text}</div>`)}catch(F){}y.append(k)}}{var m=$(".list_table").eq(1).children("tbody").children("tr").first().clone();$(".list_table").eq(1).children("tbody").empty();var p=e.getItemData("normal_review_result",!0),g=e.getItemData("committee_in_member",!0),h=e.getItemData("committee_ex_member",!0),u=e.getItemData("normal_review_dttm",!0);let E=1;const J=g.dataObj.saved_data.data,B=h.dataObj.saved_data.data;var v,f,b=[0,0,0];if(null!=J)for(let K=0;K<J.length;++K){v=void 0;try{v=p.dataObj.saved_data.data[String(J[K].info.user_seq)]}catch(U){}f=void 0;try{f=u.dataObj.saved_data.data[String(J[K].info.user_seq)]}catch(H){}b[j(E++,J[K],"내부",v,f)]++}if(null!=B)for(let Y=0;Y<B.length;++Y){v=void 0;try{v=p.dataObj.saved_data.data[String(B[Y].info.user_seq)]}catch(z){}f=void 0;try{f=u.dataObj.saved_data.data[String(J[Y].info.user_seq)]}catch(G){}b[j(E++,B[Y],"외부",v,f)]++}var x=$(".list_table").eq(1).children("tfoot");function j(e,t,a,r,i){var d=0,n=m.clone();n.removeClass("agree");let s=0;if(n.attr("user_seq",t.user_seq),n.children("td").eq(s++).text(e),n.children("td").eq(s++).text(t.info.name),n.children("td").eq(s++).text(a),null!=r&&i>0)if(n.children("td").eq(s++).text(getYMDHMSFromUnixtime(i,!0)),"1"==r.select_ids[0]){let e=r.inputs[1][1];n.addClass("agree"),n.children("td").eq(s++).text("찬성"),n.children("td").eq(s++).html(`\n            <a href="javascript:void(0);" onclick="onClickShowAgreeReason('${e}');" class="blue_deep">\n              <i class="fas fa-comment-dots mRight5"></i>${stringShortDot(e,15)}\n            </a>`)}else{d=1,n.addClass("disagree");let e=r.inputs[2][1];n.children("td").eq(s++).text("반대"),n.children("td").eq(s++).html(`\n              <a href="javascript:void(0);" onclick="onClickShowOpposeReason('${e}');" class="red">\n                <i class="fas fa-comment-dots mRight5"></i>${stringShortDot(e,15)}\n              </a>`)}else d=2,n.addClass("timeout"),n.children("td").eq(s++).text("-"),n.children("td").eq(s++).text("-"),n.children("td").eq(s++).text("미이행");return $(".list_table").eq(1).children("tbody").append(n),d}x.children("tr").children("td").eq(1).children("span").eq(0).children("span").text(b[0]),x.children("tr").children("td").eq(1).children("span").eq(1).children("span").text(b[1]),x.children("tr").children("td").eq(1).children("span").eq(2).children("span").text(b[2])}}r=e.getItemData("final_judge_result"),i=0;try{i=Number(r.dataObj.saved_data.data[0].select_ids[0])}catch(L){}d="";try{d=r.dataObj.saved_data.data[0].inputs[String(i)][1]}catch(Q){}n="";for(let W=0;W<r.dataObj.items.length;++W)if(r.dataObj.items[W].id==i){n=r.dataObj.items[W].value;break}$("#final_judge_result_text").prev(".custom-radio").find("label").text(n),""!=d?$("#final_judge_result_text").text(d):$("#final_judge_result_text").switchClass("mTop5","red").text("최종심의 미완료"),$(".card").removeClass("hidden")}function onClickShowAgreeReason(e){$(".agree_reason").text(e),$("#modal_agree_comment").modal("show")}function onClickShowOpposeReason(e){$(".oppose_reason").text(e),$("#modal_disagree_comment").modal("show")}$((function(){loadApplicationParams();$(".page-content");!function(e){let t=$(".list_table").first().find("tbody");g_trTemplete=t.children("tr").first().clone(),t.empty(),g_AppItemParser=new ItemParser(g_AppInfo.appSeq),g_AppItemParser.load({"filter.query_items":"general_title,general_end_date,final_judge_result,ibc_general_experiment,expert_review_opinion,expert_review,expert_member,committee_in_member,committee_ex_member,normal_review_result,normal_review_dttm"},dataMappingFunc)}()}));